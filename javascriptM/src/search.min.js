function searchInit(){try{var e,a="Fish species in known fishing spots";document.getElementById("searchLoadingImg").style.display="block",require(["javascript/HelpWin"],function(e){searchHelp=new e({label:"Feature Search Help",content:"Search for a named location by feature type. Allows searching for <b>township, range, and section</b>. The Fishing Atlas will highlight water bodies where certain <b>fish species</b> can be found. Select feature type and enter search text.  As you type, matches will be suggested. To remove the highlighted features from the map, press the Clear button on the main menu. Feature attributes will be displayed in a table. Click on a row to zoom to that feature.<br/><br/>"}),document.body.appendChild(searchHelp.domNode),searchHelp.startup()});var t=app+"/SearchWidget.xml?v="+ndisVer,s=createXMLhttpRequest();s.onreadystatechange=function(){if(4==s.readyState&&200===s.status){var t=createXMLdoc(s);try{require(["dojo/dom","dijit/registry","dojo/_base/lang","dojo/mouse","dojo/_base/Color","dojo/store/Memory","dijit/form/ComboBox","dijit/form/Select","esri/toolbars/draw","esri/request","esri/tasks/query","esri/tasks/QueryTask","esri/graphic","esri/layers/GraphicsLayer","esri/InfoTemplate","esri/dijit/InfoWindowLite","dojo/dom-construct","esri/urlUtils","esri/geometry/Point","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","dojo/_base/declare","dgrid/OnDemandGrid","dgrid/extensions/DijitRegistry","dgrid/extensions/ColumnResizer","dojo/domReady!"],function(s,l,n,r,i,d,o,c,g,u,m,y,h,p,f,E,N,I,b,T,B,v,x,w,k,_){function S(e){var a=Y[Q].getElementsByTagName("name")[0]&&Y[Q].getElementsByTagName("name")[0].childNodes[0]?Y[Q].getElementsByTagName("name")[0].childNodes[0].nodeValue:"undefined";alert("WARNING: In SearchWidget.xml file required value missing for tag: "+e+", in layer: "+a+".","Data Error")}try{var L,U,G,M,R,V,C,O="assets/images/i_pin.png",F=new p,D=new p,A=new T(O,40,40);A.setOffset(15,17),F.symbol=A,map.addLayer(F);var P=new T(O,50,50);D.symbol=P;var W,q=new B(B.STYLE_SOLID,new i([255,0,0,.8]),2);new v(B.STYLE_SOLID,q,new i([255,0,0,.1])),new B(B.STYLE_SOLID,new i([255,255,0,.8]),2),new v(B.STYLE_SOLID,q,new i([255,255,0,.5]));map.addLayer(D);var H,Y=t.getElementsByTagName("layer"),z=[],X=new d({data:[]}),K=(new d({data:[]}),72224);t.getElementsByTagName("zoomscale")[0]&&t.getElementsByTagName("zoomscale")[0].childNodes[0].nodeValue&&(K=t.getElementsByTagName("zoomscale")[0].childNodes[0].nodeValue);for(var Q=0;Q<Y.length;Q++){var Z="unknown";Y[Q].getElementsByTagName("name")[0]&&Y[Q].getElementsByTagName("name")[0].childNodes[0].nodeValue?Z=Y[Q].getElementsByTagName("name")[0].childNodes[0].nodeValue:S("name"),z[Z]={name:Z,url:Y[Q].getElementsByTagName("url")[0].childNodes[0]?Y[Q].getElementsByTagName("url")[0].childNodes[0].nodeValue:S("url"),expression:Y[Q].getElementsByTagName("expression")[0].childNodes[0]?Y[Q].getElementsByTagName("expression")[0].childNodes[0].nodeValue:S("expression"),searchfield:Y[Q].getElementsByTagName("searchfield")[0].childNodes[0]?Y[Q].getElementsByTagName("searchfield")[0].childNodes[0].nodeValue:S("searchfield"),textsearchlabel:Y[Q].getElementsByTagName("textsearchlabel")[0].childNodes[0]?Y[Q].getElementsByTagName("textsearchlabel")[0].childNodes[0].nodeValue:S("textsearchlabel"),fields:Y[Q].getElementsByTagName("fields")[0].childNodes[0]?Y[Q].getElementsByTagName("fields")[0].childNodes[0].nodeValue:S("fields"),displayfields:Y[Q].getElementsByTagName("displayfields")[0].childNodes[0]?Y[Q].getElementsByTagName("displayfields")[0].childNodes[0].nodeValue:S("displayfields"),sortfield:Y[Q].getElementsByTagName("sortfield")[0]&&Y[Q].getElementsByTagName("sortfield")[0].childNodes[0]?Y[Q].getElementsByTagName("sortfield")[0].childNodes[0].nodeValue:"none",numericsort:Y[Q].getElementsByTagName("numericsort")[0]&&Y[Q].getElementsByTagName("numericsort")[0].childNodes[0]?Y[Q].getElementsByTagName("numericsort")[0].childNodes[0].nodeValue:"false",titlefield:Y[Q].getElementsByTagName("titlefield")[0]&&Y[Q].getElementsByTagName("titlefield")[0].childNodes[0]?Y[Q].getElementsByTagName("titlefield")[0].childNodes[0].nodeValue:S("titlefield"),linkfield:Y[Q].getElementsByTagName("linkfield")[0]&&Y[Q].getElementsByTagName("linkfield")[0].childNodes[0]?Y[Q].getElementsByTagName("linkfield")[0].childNodes[0].nodeValue:"",linktext:Y[Q].getElementsByTagName("linktext")[0]&&Y[Q].getElementsByTagName("linktext")[0].childNodes[0]?Y[Q].getElementsByTagName("linktext")[0].childNodes[0].nodeValue:"unknown link",searchvalues:Y[Q].getElementsByTagName("searchvalues")[0]&&Y[Q].getElementsByTagName("searchvalues")[0].childNodes[0]?Y[Q].getElementsByTagName("searchvalues")[0].childNodes[0].nodeValue:"",lookupsearchvalues:Y[Q].getElementsByTagName("lookupsearchvalues")[0]&&Y[Q].getElementsByTagName("lookupsearchvalues")[0].childNodes[0]?Y[Q].getElementsByTagName("lookupsearchvalues")[0].childNodes[0].nodeValue:"",lookupfilename:Y[Q].getElementsByTagName("lookupsearchvalues")[0]&&Y[Q].getElementsByTagName("lookupsearchvalues")[0].childNodes[0]?Y[Q].getElementsByTagName("lookupfilename")[0].childNodes[0]?Y[Q].getElementsByTagName("lookupfilename")[0].childNodes[0].nodeValue:S("lookupfilename"):null,lookupfield:Y[Q].getElementsByTagName("lookupsearchvalues")[0]&&Y[Q].getElementsByTagName("lookupsearchvalues")[0].childNodes[0]?Y[Q].getElementsByTagName("lookupfield")[0].childNodes[0]?Y[Q].getElementsByTagName("lookupfield")[0].childNodes[0].nodeValue:S("lookupfield"):null,database:Y[Q].getElementsByTagName("database")[0]&&Y[Q].getElementsByTagName("database")[0].childNodes[0]?Y[Q].getElementsByTagName("database")[0].childNodes[0].nodeValue:null,filename:Y[Q].getElementsByTagName("database")[0]&&Y[Q].getElementsByTagName("database")[0].childNodes[0]?Y[Q].getElementsByTagName("filename")[0].childNodes[0]?Y[Q].getElementsByTagName("filename")[0].childNodes[0].nodeValue:S("filename"):null,database_field:Y[Q].getElementsByTagName("database")[0]&&Y[Q].getElementsByTagName("database")[0].childNodes[0]?Y[Q].getElementsByTagName("database_field")[0].childNodes[0]?Y[Q].getElementsByTagName("database_field")[0].childNodes[0].nodeValue:S("database_field"):null,database_field_type:Y[Q].getElementsByTagName("database")[0]&&Y[Q].getElementsByTagName("database")[0].childNodes[0]?Y[Q].getElementsByTagName("database_field_type")[0].childNodes[0]?Y[Q].getElementsByTagName("database_field_type")[0].childNodes[0].nodeValue:S("database_field_type"):null,graphical_database:Y[Q].getElementsByTagName("database")[0]&&Y[Q].getElementsByTagName("database")[0].childNodes[0]&&Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0].nodeValue:null,graphical_filename:Y[Q].getElementsByTagName("graphical_database")[0]&&Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_filename")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_filename")[0].childNodes[0].nodeValue:S("graphical_filename"):null,graphical_db_fields:Y[Q].getElementsByTagName("graphical_database")[0]&&Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_fields")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_fields")[0].childNodes[0].nodeValue:S("graphical_db_fields"):null,graphical_db_displayfields:Y[Q].getElementsByTagName("graphical_database")[0]&&Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_displayfields")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_displayfields")[0].childNodes[0].nodeValue:S("graphical_db_displayfields"):null,graphical_db_sort:Y[Q].getElementsByTagName("graphical_database")[0]&&Y[Q].getElementsByTagName("graphical_database")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_sort")[0].childNodes[0]?Y[Q].getElementsByTagName("graphical_db_sort")[0].childNodes[0].nodeValue:S("graphical_db_sort"):null},X.data.push({name:z[Z].name,id:Q})}var J=new d({data:[{name:"Loading..."}]}),$=new c({id:"featureType",name:"feature",store:X,value:X.data[0].name,sortByLabel:!1,labelAttr:"name",maxHeight:-1,style:{width:"250px"},onChange:function(){te(this.attr("displayedValue")),l.byId("searchText").reset()}},"featureType");$.startup();new o({id:"searchText",store:J,autoComplete:!1,searchAttr:z[X.data[0].name].searchfield,style:{width:"250px"},hasDownArrow:!0,maxHeight:195,onClick:function(){"GMUs"==$.attr("displayedValue")&&settings.useGMUs&&("Big Game GMU"==gmu&&z.GMUs.titlefield!=settings.elkField||"Bighorn GMU"==gmu&&z.GMUs.titlefield!=settings.sheepField||"Goat GMU"==gmu&&z.GMUs.titlefield!=settings.goatField)&&(this.loadAndOpenDropDown(),te("GMUs"))},onKeyUp:function(e){[16,17,27,33,34,35,36,37,38,39,40].indexOf(e.keyCode)>-1||te(l.byId("featureType").attr("displayedValue"))}},"searchText").startup();var ee=new d({idProperty:"id",data:[]});for(Q=0;Q<37;Q++)0==Q?ee.data.push({id:"",name:""}):Q<10?ee.data.push({id:"00"+Q,name:"00"+Q}):ee.data.push({id:"0"+Q,name:"0"+Q});var ae=new c({id:"searchSec",labelAttr:"name",style:{width:"50px",position:"absolute",left:"77px"},maxHeight:158,store:ee},"searchSec");function te(a){try{if(l.byId("searchText").set("placeHolder",""),"Township Range"===a)return document.getElementById("searchInput1").style.display="none",document.getElementById("searchInput2").style.display="block",document.getElementById("searchTwn").value="",document.getElementById("searchRng").value="",void l.byId("searchSec").attr("value","");if("GMUs"==a&&settings.useGMUs&&("Big Game GMU"==gmu?(z[a].fields=settings.elkField+",COUNTY",z[a].displayfields="GMU,County",z[a].titlefield=settings.elkField,z[a].searchfield=settings.elkField,z[a].expression=settings.elkField+" = [value]",z[a].url=settings.elkUrl):"Bighorn GMU"==gmu?(z[a].fields=settings.sheepField,z[a].displayfields="Bighorn Sheep GMU",z[a].titlefield=settings.sheepField,z[a].searchfield=settings.sheepField,z[a].expression=settings.sheepField+" = UPPER('[value]')",z[a].url=settings.sheepUrl):(z[a].fields=settings.goatField,z[a].displayfields="Mountain Goat GMU",z[a].titlefield=settings.goatField,z[a].searchfield=settings.goatField,z[a].expression=settings.goatField+" = UPPER('[value]')",z[a].url=settings.goatUrl)),document.getElementById("searchInput1").style.display="block",document.getElementById("searchInput2").style.display="none",document.getElementById("searchLabel").innerHTML=z[a].textsearchlabel+" ",""!=z[a].searchvalues)return void se(a);if(""!=z[a].lookupsearchvalues)return void le(a);var t,s=a;document.getElementById("searchLoadingImg").style.display="block",esri.config.defaults.io.proxyUrl="/proxy/DotNet/proxy.ashx";var n=l.byId("searchText").attr("displayedValue"),r=/'/g;n=n.replace(r,"''"),t=z[a].expression.indexOf("= UPPER('[value]')",0)>0?z[a].expression.replace("= UPPER('[value]')","LIKE UPPER('"+n+"%')"):z[a].expression.indexOf("LIKE UPPER('%[value]%')",0)>0?z[a].expression.replace("LIKE UPPER('%[value]%')","LIKE UPPER('"+n+"%')"):z[a].expression.replace("= [value]","<> -1");var i=z[a].searchfield;e=!1,z[a].fields.indexOf("COUNTYNAME")>-1&&(i=z[a].searchfield+",COUNTYNAME",e=!0),"GMUs"!=s||"Mountain Goat GMU"!=z[s].displayfields&&"Bighorn Sheep GMU"!=z[s].displayfields||(i+=",HUNTING"),u({url:z[a].url+"/query",content:{where:t,returnGeometry:!1,outFields:i,f:"json",returnDistinctValues:!0,orderByFields:z[a].searchfield},handleAs:"json"}).then(function(e){try{for(var a,t=[],n=0;n<e.features.length;n++)("GMUs"!=s||"Mountain Goat GMU"!=z[s].displayfields&&"Bighorn Sheep GMU"!=z[s].displayfields||"YES"==e.features[n].attributes.HUNTING)&&(a={},e.features[n].attributes.COUNTYNAME?a[z[s].searchfield]=e.features[n].attributes[z[s].searchfield]+" ("+e.features[n].attributes.COUNTYNAME+")":a[z[s].searchfield]=e.features[n].attributes[z[s].searchfield],a.value=e.features[n].attributes[z[s].searchfield],t.push(a));if("GMUs"!=s||"Mountain Goat GMU"!=z[s].displayfields&&"Bighorn Sheep GMU"!=z[s].displayfields)t.sort(sortArrayOfObj(z[s].searchfield));else{var r=[],i="S";"Mountain Goat GMU"==z[s].displayfields&&(i="G"),t.forEach(function(e){"OUT"!=e[z[s].searchfield]&&r.push(e[z[s].searchfield].substring(1))}),r.sort(function(e,a){return e-a});t=null,t=[],r.forEach(function(e){a={},a[z[s].searchfield]=i+e,t.push(a),a=null}),r=null,null,a=null}var o=new d({data:t}),c=l.byId("searchText");c.set("store",o),c.set("searchAttr",z[s].searchfield),t=null,document.getElementById("searchLoadingImg").style.display="none"}catch(e){alert("Feature Search query error: "+e.message+" in search.js/updateSearchTextStore query response. field="+z[s].searchfield,"Data Error",e),document.getElementById("searchLoadingImg").style.display="none"}},function(e){document.getElementById("searchLoadingImg").style.display="none",alert("Feature Search query error in javascript/search.js updateSearchTextStore(). Query="+z[s].url+"/query?where="+t+"&outfields="+z[s].searchfield+" "+e.message,"Data Error",e)})}catch(e){document.getElementById("searchLoadingImg").style.display="none",alert("Feature Search error: "+e.message+" in search.js/updateSearchTextStore.","Data Error",e)}}function se(e){document.getElementById("searchLoadingImg").style.display="block";var a=z[e].searchvalues.split(","),t=[];a.forEach(function(a){var s={};s[z[e].searchfield]=a.trim(),t.push(s)});var s=new d({data:t}),n=l.byId("searchText");n.set("store",s),n.reset(),n.set("searchAttr",z[e].searchfield),n.set("placeHolder","Select a "+z[id].name),obj=null,t=null,e=null,a=null,document.getElementById("searchLoadingImg").style.display="none"}function le(e){document.getElementById("searchLoadingImg").style.display="block";var a=createXMLhttpRequest();a.onreadystatechange=function(){if(4==a.readyState&&200===a.status){for(var t=createXMLparser(a.responseText.substr(a.response.indexOf("?>")+2)),s=t.getElementsByTagName(z[e].lookupfield),n=[],r=0;r<s.length;r++){var i={};i[z[e].searchfield]=s[r].childNodes[0].nodeValue,n.push(i)}var o=new d({data:n}),c=l.byId("searchText");c.set("store",o),c.set("searchAttr",z[e].searchfield),c.set("placeHolder","Select a "+z[e].name),n=null,document.getElementById("searchLoadingImg").style.display="none"}else 404===a.status?(alert("File: "+app+"/"+z[e].lookupsearchvalues+" not found.","Data Error"),document.getElementById("searchLoadingImg").style.display="none"):4===a.readyState&&500===a.status&&(alert("File: "+app+"/"+z[e].lookupsearchvalues+" not found.","Data Error"),document.getElementById("searchLoadingImg").style.display="none")},a.open("GET",app+"/"+z[e].lookupsearchvalues+"?v="+ndisVer,!0),a.send(null)}function ne(a){try{var t,s,n;"function"==typeof gtag&&gtag("event","click",{widget_name:"Feature Search",app_name:app}),a&&(a.stopImmediatePropagation(),a.preventDefault()),"Township Range"==l.byId("featureType").attr("displayedValue")?(document.getElementById("searchTwn").blur(),document.getElementById("searchRng").blur()):document.getElementById("searchText").blur(),document.body.focus(),window.scrollTo(0,0),t=e&&l.byId("searchText").get("value").lastIndexOf(" (")>-1?l.byId("searchText").get("value").substr(0,l.byId("searchText").get("value").lastIndexOf(" (")):l.byId("searchText").get("value");var r=/([^a-zA-Z0-9 :#\-\',\.!_\*()/&])/g;r.test(t)&&alert("Illegal characters were removed from the search text.","Warning"),t=t.replace(r,"");var i=/'/g;t=t.replace(i,"''");var d,o=l.byId("featureType").attr("displayedValue");if(""==t&&"Township Range"!=o)return;if(ce(),document.getElementById("searchLoadingImg").style.display="block",z[o].database){document.getElementById("searchLoadingImg").style.display="block";var c=createXMLhttpRequest();c.open("POST",z[o].database+"?v="+ndisVer+"&key="+t,!0),c.send(null),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var e=createXMLparser(c.responseText.substr(c.response.indexOf("?>")+2)),a=e.getElementsByTagName(z[o].filename);if(0==a.length)return alert("No features found with that name. Please try again.","Warning"),void(document.getElementById("searchLoadingImg").style.display="none");d=z[o].database_field+" IN (";for(var t=0;t<a.length;t++)t>0&&(d+=","),"STRING"==z[o].database_field_type.toUpperCase()?d+="'"+a[t].getElementsByTagName(z[o].database_field)[0].childNodes[0].nodeValue+"'":d+=a[t].getElementsByTagName(z[o].database_field)[0].childNodes[0].nodeValue;d+=")",G=z[o].url,M=z[o].fields,U=z[o].displayfields.split(","),R=z[o].titlefield,V=z[o].linkfield.split(","),C=z[o].linktext.split(","),s=new y(z[o].url),n=new m,n.where=d,n.outFields=z[o].fields.split(","),n.returnGeometry=!0,n.outSpatialReference=map.spatialReference,s.requestOptions={usePost:!0},s.execute(n,function(e){W=de(e,l.byId("featureType").attr("displayedValue"))},function(e){alert("Error in javascript/search.js/setSelect/queryTask.execute "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none"})}},c.onerror=function(){alert("There was an error looking up the data from "+z[o].database+"?key="+t,"Code Error"),document.getElementById("searchLoadingImg").style.display="none"}}else{var g=z[o].expression;if("Township Range"==o){if(document.getElementById("searchLoadingImg").style.display="block",d=g.replace("[value1]",parseInt(document.getElementById("searchTwn").value)),d="on"==l.byId("nsSw").get("value")?d.replace("[value2]","N"):d.replace("[value2]","S"),d=d.replace("[value3]",parseInt(document.getElementById("searchRng").value)),d="on"==l.byId("ewSw").get("value")?d.replace("[value4]","W"):d.replace("[value4]","E"),l.byId("searchSec").get("value"))d=d.replace("[value5]",parseInt(l.byId("searchSec").get("value")));else{var u=d.indexOf("AND SECTION");d=d.substring(0,u)}if(d.indexOf("NaN")>-1)return alert("You must enter a value for Township and Range.",""),void(document.getElementById("searchLoadingImg").style.display="none");t=document.getElementById("searchTwn").value,"on"==l.byId("nsSw").get("value")?t+="N":t+="S",t+=document.getElementById("searchRng").value,"on"==l.byId("ewSw").get("value")?t+="W":t+="E",l.byId("searchSec").get("value")&&(t+=" Sec "+l.byId("searchSec").get("value")),document.getElementById("searchTwn").value="",document.getElementById("searchRng").value="",l.byId("searchSec").attr("value","")}else{if(isNaN(Number(t))&&-1!=g.indexOf("= [value]")){l.byId("searchText").set("value",""),updatedList=!1;var h="Your search for "+t+" failed.  Only numbers are allowed.  Please try again.";return alert(h,"Warning"),t="",void(document.getElementById("searchLoadingImg").style.display="none")}document.getElementById("searchLoadingImg").style.display="block",d=e&&l.byId("searchText").get("value").lastIndexOf(" (")>-1?g.replace("[value]",t)+" AND COUNTYNAME = '"+l.byId("searchText").get("value").substring(l.byId("searchText").get("value").lastIndexOf(" (")+2,l.byId("searchText").get("value").length-1)+"'":g.replace("[value]",t),l.byId("searchText").set("value","")}G=z[o].url,M=z[o].fields;var p=z[o].displayfields;if(null!=p&&(U=z[o].displayfields.split(",")),R=z[o].titlefield,V=z[o].linkfield.split(","),C=z[o].linktext.split(","),G){s=new y(G),n=new m,n.where=d;var f=M.split(",");"GMUs"!=o||"Mountain Goat GMU"!=z[o].displayfields&&"Bighorn Sheep GMU"!=z[o].displayfields||f.push("HUNTING"),n.outFields=f,n.returnGeometry=!0,n.outSpatialReference=map.spatialReference,s.execute(n,function(e){if(0==e.features.length)return alert("No features found with that name. Please try again.","Warning"),void(document.getElementById("searchLoadingImg").style.display="none");"Wildfire"==l.byId("featureType").attr("displayedValue")?re(e):de(e,l.byId("featureType").attr("displayedValue"))},function(e){alert("Error in javascript/search.js/setSelect/queryTask.execute, url="+G+". Where "+d+". Error message: "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none"})}}}catch(e){alert(e.message+" in javascript/search.js/setSelection","Code Error",e),document.getElementById("searchLoadingImg").style.display="none"}}function re(e){var a=0;for(Q=0;Q<e.features.length;Q++)if(e.features[Q].attributes.IRWINID){queryTask=new y("https://services3.arcgis.com/T4QMspbfLg3qTGWY/ArcGIS/rest/services/IRWIN_to_Inciweb_View/FeatureServer/0");var t=new m,s=e.features[Q].attributes.IRWINID.substr(1,e.features[Q].attributes.IRWINID.length-2).toLocaleLowerCase();t.where="IrwinID='"+s+"'",t.outFields=["LinkURI","IrwinID"],t.returnGeometry=!1,queryTask.execute(t,function(t){var s=0;if(a++,0!=t.features.length&&t.features[0].attributes&&t.features[0].attributes.IrwinID&&e.features[s].attributes.IRWINID){for(j=0;j<e.features.length;j++)e.features[j].attributes.IRWINID&&t.features[0].attributes.IrwinID&&e.features[j].attributes.IRWINID.toLowerCase()=="{"+t.features[0].attributes.IrwinID.toLowerCase()+"}"&&(s=j);e.features[s].attributes.IRWINID=t.features[0].attributes.LinkURI}else;if(a==e.features.length){var n=[];for(j=0;j<e.features.length;j++)e.features[j].attributes.IRWINID&&e.features[j].attributes.IRWINID.indexOf("inciweb")>-1&&n.push(e.features[j]);e.features=n,e.features.length>0?de(e,l.byId("featureType").attr("displayedValue")):(alert("No wildfire incident reports found with that name. Please try again.","Warning"),document.getElementById("searchLoadingImg").style.display="none")}},function(e){alert("Error in javascript/search.js/setSelect/queryTask.execute, url="+G+". Where irwinID='"+s+"'. Error message: "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none",document.getElementById("searchMsg").style.display="none"})}else a++}function ie(e){return e}function de(e,t){function l(e,a,t){var s="",l=t;return a.forEach(function(e,t){"true"==l[e]?(s+="if(parseInt(arguments[0]."+e+")-parseInt(arguments[1]."+e+")>0)return 1;",s+="else if(parseInt(arguments[0]."+e+")-parseInt(arguments[1]."+e+")==0)",s+=t<a.length-1?"{":"return 0"):(s+="if(arguments[0]."+e+">arguments[1]."+e+")return 1;",s+="else if(arguments[0]."+e+"==arguments[1]."+e+")",s+=t<a.length-1?"{":"return 0")}),s+=Array(a.length).join("}")+";return -1",e.sort(new Function(s))}t==a&&(t="Fish species");for(var n=M.split(","),r=6,i={},d=0;d<n.length;d++)i[n[d]]=0;W=[],L=null,L=[],R||(R=e.displayFieldName);var o=[],c=0;if(e.features.forEach(function(a){try{var s=a.attributes;if("GMUs"!=t||"Big Game GMU"==gmu||"YES"==s.HUNTING){var l,r=oe(a),g={icon:O,point:r,geometry:a.geometry},u={icon:O,point:r,geometry:a.geometry},m=new Object;for(m.id=c++,d=0;d<n.length;d++)s[n[d]]&&("Acres"==n[d]?m[n[d]]=s[n[d]].numberFormat(2):m[n[d]]=s[n[d]],-1==V.indexOf(n[d])&&s[n[d]].toString().length+3>i[n[d]]&&(i[n[d]]=s[n[d]].toString().length+3),i[n[d]]>35&&s[n[d]].toString().indexOf(" ")>-1&&(i[n[d]]=35));o.push(m),m=null;for(d=0;d<U.length;d++){try{l=s[n[d]].toString()}catch(e){l=""}if(n[d].toUpperCase()==R.toUpperCase()&&(g.title=l,u.title=l),V.indexOf(n[d])>-1){var y=V.indexOf(n[d]);""!=l&&" "!=l&&"key"!=U[d]?(g.link=new Array,g.link.push(l),g.linktext=new Array,g.linktext.push(C[y]),C[y].length>0?u[U[d].replace(/ /g,"_")]='<a target="_blank" href="'+l+'">'+C[y]+"</a>":u[U[d].replace(/ /g,"_")]=l,0):("key"!=U[d]&&0,u[U[d].replace(/ /g,"_")]="")}else"key"!=U[d]&&0,null!=U?"Acres"==U[d]?u[U[d]]=Number(l).numberFormat(2):u[U[d].replace(/ /g,"_")]=l:"Acres"==n[d]?u[n[d]]=Number(l).numberFormat(2):u[n[d]]=l}switch(W.push(u),a.attributes=g,a.geometry.type){case"point":a.symbol=A;break;case"polyline":a.symbol=q;break;case"polygon":a.symbol=A}F.add(a),document.getElementById("searchRemoveBtn").style.visibility="visible",addLabel(h(a.attributes.point),a.attributes.title,F,"11pt"),L.push(a)}else e.features=null}catch(e){alert("Error in createRecordData search.js "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none"}}),!e.features)return alert("No features found. Please try again.","Warning"),document.getElementById("searchMsg").style.display="none",document.getElementById("searchGrid").style.display="none",void(document.getElementById("searchLoadingImg").style.display="none");F.id="searchLayer0";var g={};for(p=0;p<U.length;p++){var u={label:U[p],resizable:!0};g[U[p].replace(/ /g,"_")]=u,g[U[p].replace(/ /g,"_")].label.length+10>i[n[p]]&&(i[n[p]]=g[U[p].replace(/ /g,"_")].label.length+10),i[n[p]]=i[n[p]]*r+"px",V.indexOf(n[p])>-1&&(g[U[p].replace(/ /g,"_")].formatter=ie)}g.geometry={label:"geometry",width:"0px"},g.icon={label:"icon",width:"0px"},g.point={label:"point",width:"0px"},g.title={label:"title",width:"0px"};var m=s.byId("searchGrid");m.childNodes.length>0&&m.removeChild(m.childNodes[0]),H=new(x([w,k,_]))({columns:g,selectionMode:"single",cellNavigation:!1});for(var y=z[t].sortfield.split(","),p=0;p<y.length;p++)y[p]=y[p].replace(/ /g,"_");var f={},E=z[t].numericsort.split(",");for(p=0;p<y.length;p++)f[y[p]]=E[p];for(l(W,y,f),p=0;p<n.length;p++)H.styleColumn(U[p].replace(/ /g,"_"),"width:"+i[n[p]]);if(H.styleColumn("Acres","text-align: right;"),H.styleColumn("geometry","display: none;"),H.styleColumn("point","display: none;"),H.styleColumn("icon","display: none;"),H.styleColumn("title","display: none;"),H.on(".dgrid-row:click",function(e){require(["esri/geometry/Extent"],function(a){var t=H.row(e),s=(H.column(e),t.data.geometry.getExtent());if(null!=s){var l=new a({xmin:s.xmin,ymin:s.ymin,xmax:s.xmax,ymax:s.ymax,spatialReference:{wkid:wkid}});map.setExtent(l,!0)}else map.setScale(K),map.centerAt(t.data.point)}),closeMenu(),document.getElementById("searchPane").style.display="none"}),i=null,document.getElementById("searchLoadingImg").style.display="none",document.getElementById("searchGrid").style.display="block",document.getElementById("searchMsg").style.display="none",W&&1==W.length){var N=W[0].geometry.getExtent();null!=N?require(["esri/geometry/Extent"],function(e){var a=new e({xmin:N.xmin,ymin:N.ymin,xmax:N.xmax,ymax:N.ymax,spatialReference:{wkid:wkid}});map.setExtent(a,!0)}):(map.setScale(K),map.centerAt(W[0].point))}else"Township"==U[0]?(map.setScale(K),map.centerAt(W[0].point)):require(["esri/graphicsUtils"],function(a){map.setExtent(a.graphicsExtent(e.features),!0)});H.renderArray(W),m.appendChild(H.domNode),H.startup()}function oe(e){var a;switch(e.geometry.type){case"point":a=new b(e.geometry.x,e.geometry.y,map.spatialReference);break;case"polyline":var t=e.geometry,s=t.paths.length,l=parseInt(s/2-1),n=[];n=t.paths[l];var r=n.length,i=parseInt(r/2-1);a=t.getPoint(l,i);break;case"polygon":a=e.geometry.getCentroid()}return a}function ce(){F.clear(),D.clear(),document.getElementById("searchRemoveBtn").style.visibility="hidden",document.getElementById("searchGrid").style.display="none"}function ge(){ce(),closeMenu()}ae.startup(),document.getElementById("searchBtn").addEventListener("click",ne),document.getElementById("searchRemoveBtn").addEventListener("click",ge),te(X.data[0].name),document.getElementById("searchLabel").innerHTML=z[X.data[0].name].textsearchlabel+" "}catch(e){alert("Error in javascript/search.js searchInit. "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none"}})}catch(e){alert("Error in javascript/search.js searchInit. "+e.message,"Code Error",e),document.getElementById("searchLoadingImg").style.display="none"}}else 404===s.status?(alert("Error: Missing config.xml file in "+app+" directory.","Data Error"),hideLoading()):4===s.readyState&&500===s.status&&(alert("Make sure your application name is correct on the URL. app="+app,"Warning"),hideLoading())},s.open("GET",t,!0),s.send(null)}catch(e){alert(e.message+" in javascript/search.js trying to read "+app+"/SearchWidget.xml file.","Code Error",e),document.getElementById("searchLoadingImg").style.display="none"}}var searchHelp=null;