function printInit(){require(["dojo/store/Memory","dijit/form/ComboBox","dijit/form/Select"],function(e,t,i){var n;n=new e(useLargeSizes?{idProperty:"value",data:[{name:"small",value:"8.5 x 11"},{name:"medium",value:"11 x 17"},{name:"large",value:"17 x 22"},{name:"x large",value:"22 x 34"},{name:"xx large",value:"34 x 44"}]}:{idProperty:"name",data:[{name:"8.5 x 11",value:"8.5 x 11"},{name:"11 x 17",value:"11 x 17"}]}),sizeCombo=new i({id:"size",name:"size",store:n,value:n.data[0].name,sortByLabel:!1,labelAttr:"name",maxHeight:-1,style:{margin:"auto"},onChange:function(){changePrintSize()}},"size"),sizeCombo.startup();var a=new e({idProperty:"name",data:[{name:"Landscape"},{name:"Portrait"}]});orientCombo=new i({id:"orient",name:"orient",store:a,value:a.data[1].name,sortByLabel:!1,labelAttr:"name",maxHeight:-1,style:{margin:"auto"},onChange:function(){changePrintSize()}},"orient"),orientCombo.startup()});var e=createXMLhttpRequest(),t=app+"/PrintPdfWidget.xml?v="+ndisVer;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=createXMLdoc(e);t.getElementsByTagName("disclaimer")[0]?prtDisclaimer=t.getElementsByTagName("disclaimer")[0].firstChild.nodeValue:alert("Missing tag, disclaimer, in "+app+"/PrintPdfWidget.xml file.","Data Error")}else 404===e.status?(alert("Error: Missing PrintPdfWidget.aspx file in "+app+" directory.","Data Error"),hideLoading()):4===e.readyState&&500===e.status&&(alert("Missing PrintPdfWidget.aspx file. app="+app,"Data Error"),hideLoading())},e.open("GET",t,!0),e.send()}function printShow(){require(["esri/layers/GraphicsLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/VectorTileLayer","esri/layers/FeatureLayer","esri/layers/OpenStreetMapLayer","dojo/dom","dojo/on","dojo/_base/array","dijit/registry"],function(e,t,i,n,r,s,d,l,p,o){function m(e){p.forEach(w,function(e){e.remove()}),w=[]}function y(e){var t,i=e.layer;if(B[e.target.id]>10){var n=document.getElementById("printLoadingTxt").innerText,a=n.indexOf(i.id),r=a+i.id.length,s=n.substring(0,a),l=n.substring(r);", "===l.substring(l.length-2)&&(l=l.substring(0,l.length-2)),", "===l.substring(0,2)&&(l=l.substring(2)),n=s+l,", "===n.substring(-2)&&(n=n.substring(0,-2)),"Still loading: "===n?(document.getElementById("printLoadingErr").style.display="none",document.getElementById("printLoadingTxt").innerText=""):document.getElementById("printLoadingTxt").innerText=n}if(i.url&&i.url.toLowerCase().indexOf("mapserver")>-1&&(null!=i.setVisibleLayers&&i.visibleLayers&&i.layerInfos)){var p=i.visibleLayers,m=i.layerInfos;for(j=0;j<i.visibleLayers.length;j++){k=i.visibleLayers[j];do{if(hideGroupSublayers.indexOf(m[k].name)>-1&&m[k].subLayerIds)for(t=0;t<m[k].subLayerIds.length;t++)if(-1==p.indexOf(m[k].subLayerIds[t])&&p.push(m[k].subLayerIds[t]),"Big Game GMU"==m[m[k].subLayerIds[t]+1].name){var y=1;"Bighorn GMU"==gmu?y=2:"Goat GMU"==gmu&&(y=3),-1==p.indexOf(m[k].subLayerIds[t]+y)&&p.push(m[k].subLayerIds[t]+y)}else-1==p.indexOf(m[k].subLayerIds[t]+1)&&p.push(m[k].subLayerIds[t]+1);k=m[k].parentLayerId}while(-1!=k)}var c=new Array(0,1,2,3,4,5,6,7,8,9);for(t=0;t<m.length;t++){-1!=p.indexOf(m[t].id)?m[t].visible=!0:-1==m[t].parentLayerId||m[t].subLayerIds?m[t].visible=!1:m[t].name.substr(m[t].name.length-3,3).indexOf("GMU")>-1?m[t].name==gmu?(-1==p.indexOf(t)&&(m[t].visible=!0),c.indexOf(parseInt(m[m[t].parentLayerId].name.substr(0,1)))>-1&&-1==p.indexOf(m[t].parentLayerId)&&(m[m[t].parentLayerId].visible=!0)):m[t].visible=!1:1==m[t].defaultVisibility&&-1===p.indexOf(m[t].parentLayerId)&&c.indexOf(parseInt(m[m[t].parentLayerId].name.substr(0,1)))>-1&&(m[m[t].parentLayerId].visible=!0);var u=p.indexOf(m[t].id);u>-1&&m[t].subLayerIds&&p.splice(u,1)}i.setVisibleLayers(p.sort(function(e,t){return e-t}),!1)}i.spatialReference=map.spatialReference,i.refresh(),previewMap.addLayer(i),L.push(i),f++;var g=M;for(P=0;P<x.length;P++)for(j=0;j<L.length;j++)x[P]==L[j].id&&(previewMap.reorderLayer(L[j],g),g++);f==x.length&&(o.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",o.byId("print_button").set("disabled",!1))}function c(e){B[e.target.id]<10?setTimeout(function(){u(map.getLayer(e.target.id))},500):10==B[e.target.id]?("none"==document.getElementById("printLoadingErr").style.display&&(document.getElementById("printLoadingErr").style.display="block"),"Still loading: "==document.getElementById("printLoadingTxt").innerText||""==document.getElementById("printLoadingTxt").innerText?document.getElementById("printLoadingTxt").innerText="Still loading: "+e.target.id:document.getElementById("printLoadingTxt").innerText+=", "+e.target.id,setTimeout(function(){u(map.getLayer(e.target.id))},500),o.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",o.byId("print_button").set("disabled",!1)):setTimeout(function(){u(map.getLayer(e.target.id))},1e3)}function u(t){if("none"!==d.byId("printDiv").style.display){var n;if(B[t.id]++,t.id.indexOf("reportGraphicsLayer")>-1)return f++,void(f==x.length&&(o.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",o.byId("print_button").set("disabled",!1)));if(null===t.url&&t.graphics){n=new e({id:t.id,visible:t.visible}),n.id=t.id;var s=t.graphics;for(a=0;a<s.length;a++)g=s[a].clone(),n.add(g);return previewMap.addLayer(n),L.push(n),s=null,f++,void(f==x.length&&(o.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",o.byId("print_button").set("disabled",!1)))}if(t.url.toLowerCase().indexOf("mapserver")>-1){if(n=new i(t.url,{opacity:parseFloat(t.opacity),id:t.id,visible:t.visible}),t.visibleLayers){for(var p=[],m=0;m<t.visibleLayers.length;m++)p.push(parseInt(t.visibleLayers[m]));n.setVisibleLayers(p),p=null}}else t.url.toLowerCase().indexOf("featureserver")>-1?n=new r(t.url,{opacity:parseFloat(t.opacity),id:t.id,visible:t.visible}):alert("Unknown map layer type for "+t.url+" in "+app+"/config.xml","Data Error");n&&(w.push(l(n,"error",c)),w.push(l(n,"load",y)))}}o.byId("print_button").set("label","Loading"),o.byId("print_button").set("disabled",!0),d.byId("print_button").style.opacity=".9",d.byId("print_button").style.color="lightgray",previewMap.spatialReference=map.spatialReference;var h,v,b,w=[],I=[],f=0,L=[],x=[],M=0,E=0,B=[];try{for(document.getElementById("printLoadingErr").style.display="none",document.getElementById("printLoadingTxt").innerText="",w.push(printDialog.on("hide",m)),document.getElementById("showPreviewMap").checked=!1,drawing=!0,document.getElementById("print_button").style.display="block",document.getElementById("printMapLink").innerHTML="",document.getElementById("print_link").style.display="none",document.getElementById("printMB").style.display="none",document.getElementById("print_instr").style.display="block",document.getElementById("sizeLabel").style.display="inline",document.getElementById("size").style.display="inline-table",document.getElementById("mapscale").style.display="inline",document.getElementById("mapscaleList").style.display="inline-table",document.getElementById("orientLabel").style.display="inline",document.getElementById("orient").style.display="inline-table",document.getElementById("pdf_name_label").style.display="block",document.getElementById("pdf_name").style.display="block",document.getElementById("pdf_name").onclick=function(){document.getElementById("printScroll").scrollTop=2e3},document.getElementById("pdf_name").onkeyup=function(e){null!=e.key?"Enter"!==e.key&&"NumpadEnter"!==e.key||document.getElementById("pdf_name").blur():13==e.keyCode&&document.getElementById("pdf_name").blur()},document.getElementById("printPreview").style.display="block",document.getElementById("previewCkBx").style.display="block",previewMap.removeAllLayers(),printDialog.show(),P=0;P<map.layerIds.length;P++)v=map.getLayer(map.layerIds[P]),"layer_osm"==map.layerIds[P]?(b=new s,b.id="layer_osm",previewMap.addLayer(b),b=null,M++):v.attributionDataUrl&&v.attributionDataUrl.indexOf("OpenStreet")>-1?(b=new s,b.id="layer_osm",previewMap.addLayer(b),b=null,M++):map.layerIds[P].indexOf("layer")>-1&&1==map.getLayer(map.layerIds[P]).visibleAtMapScale&&(map.getLayer(map.layerIds[P]).url.indexOf("MapServer")>-1?h=new t(map.getLayer(map.layerIds[P]).url,{id:"basemap",visible:!0}):(h=new n(map.getLayer(map.layerIds[P]).url,{id:"basemap",visible:!0}),h.setStyle(map.getLayer(map.layerIds[P]).url)),"reference"==v._basemapGalleryLayerType?h.id="reference":P>0&&(h.id="basemap"+P),h.spatialReference=map.spatialReference,h._basemapGalleryLayerType=v._basemapGalleryLayerType,h.refresh(),previewMap.addLayer(h),h=null,M++);for(var _=map.getLayersVisibleAtScale(),P=0;P<_.length;P++)_[P].visible&&-1==_[P].id.indexOf("layer")&&(I.push(_[P]),x.push(_[P].id),_[P].layerInfos&&_[P].visible&&E++);if(0==E)return alert("Printing of basemaps alone does not work. Please add map layers. From the menu, select 'Layers & Legend.'","Warning"),void(drawing=!1);for(P=0;P<I.length;P++)I[P].visible&&(B[I[P].id]=0,u(I[P]));0==I.length&&(o.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",o.byId("print_button").set("disabled",!1));var T=map.getLevel();T!=previewMap.getLevel()?(previewMap.extent=map.extent,document.getElementById("printPreview").style.display="none",dijit.byId("mapscaleList").set("displayedValue",Math.round(T))):(previewMap.extent=map.extent,changePrintSize())}catch(e){alert("Problem loading print menu. Error message: "+e.message,"Notice",e)}})}function changePrintSize(e){require(["esri/geometry/Point","esri/geometry/Extent","esri/SpatialReference","dojo/dom","dijit/registry"],function(t,i,n,a,r){if(previewMap&&previewMap.extent){document.getElementById("printMapLink").innerHTML="";a.byId("orient");var s=orientCombo.attr("displayedValue"),d=(a.byId("size"),sizeCombo.attr("value"));if(e){var l,p=dijit.byId("mapscaleList").get("value"),o=3.28084*(map.extent.xmax-map.extent.xmin)*12/p,m=3.28084*(map.extent.ymax-map.extent.ymin)*12/p;if(l="Landscape"==s?o:m,useLargeSizes){if(l<=11){if("8.5 x 11"!=d)return d="8.5 x 11",sizeCombo.set("value","8.5 x 11"),void("Landscape"==s?(inchesWidth=10.2,inchesHeight=7.25):(inchesWidth=7.7,inchesHeight=9.75))}else if(l<=17){if("11 x 17"!=d)return d="11 x 17",sizeCombo.set("value","11 x 17"),void("Landscape"==s?(inchesWidth=16.2,inchesHeight=9.75):(inchesWidth=10.2,inchesHeight=15.75))}else if(l<=22){if("17 x 22"!=d)return d="17 x 22",sizeCombo.set("value","17 x 22"),void("Landscape"==s?(inchesWidth=21.2,inchesHeight=15.75):(inchesWidth=16.2,inchesHeight=20.75))}else if(l<=34){if("22 x 34"!=d)return d="22 x 34",sizeCombo.set("value","22 x 34"),void("Landscape"==s?(inchesWidth=33.2,inchesHeight=20.75):(inchesWidth=21.2,inchesHeight=32.75))}else if("34 x 44"!=d)return d="34 x 44",sizeCombo.set("value","34 x 44"),void("Landscape"==s?(inchesWidth=43.2,inchesHeight=32.75):(inchesWidth=33.2,inchesHeight=42.75))}else if(l<=11){if("8.5 x 11"!=d)return d="8.5 x 11",sizeCombo.set("value","8.5 x 11"),void("Landscape"==s?(inchesWidth=10.2,inchesHeight=7.25):(inchesWidth=7.7,inchesHeight=9.75))}else if("11 x 17"!=d)return d="11 x 17",sizeCombo.set("value","11 x 17"),void("Landscape"==s?(inchesWidth=16.2,inchesHeight=9.75):(inchesWidth=10.2,inchesHeight=15.75))}"8.5 x 11"==d?d="Letter ":"11 x 17"==d?d="Tabloid ":"17 x 22"==d?d="ANSIC ":"22 x 34"==d?d="ANSID ":"34 x 44"==d&&(d="ANSIE "),"Landscape"==s?"Letter "==d?(previewMap.width=979,previewMap.height=696,inchesWidth=10.2,inchesHeight=7.25,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Tabloid "==d?(previewMap.width=1555,previewMap.height=936,inchesWidth=16.2,inchesHeight=9.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIC "==d?(previewMap.width=2035,previewMap.height=1512,inchesWidth=21.2,inchesHeight=15.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSID "==d?(previewMap.width=3187,previewMap.height=1992,inchesWidth=33.2,inchesHeight=20.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIE "==d&&(previewMap.width=4147,previewMap.height=3120,inchesWidth=43.2,inchesHeight=32.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Letter "==d?(previewMap.width=739,previewMap.height=936,inchesWidth=7.7,inchesHeight=9.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Tabloid "==d?(previewMap.width=979,previewMap.height=1512,inchesWidth=10.2,inchesHeight=15.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIC "==d?(previewMap.width=1555,previewMap.height=1992,inchesWidth=16.2,inchesHeight=20.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSID "==d?(previewMap.width=2035,previewMap.height=3144,inchesWidth=21.2,inchesHeight=32.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIE "==d&&(previewMap.width=3187,previewMap.height=4104,inchesWidth=33.2,inchesHeight=42.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})),document.getElementById("printPreviewMap").style.width=previewMap.width+"px",document.getElementById("printPreviewMap").style.height=previewMap.height+"px";var y=document.getElementById("printPreviewMap_root");y.style.width=previewMap.width+"px",y.style.height=previewMap.height+"px",y.style.overflow="auto",showPrintPreview()}else alert("Please wait for page to load.")})}function printMap(){require(["esri/tasks/PrintTask","esri/tasks/PrintTemplate","esri/tasks/PrintParameters","esri/graphic","esri/geometry/Point","esri/tasks/LegendLayer","esri/layers/GraphicsLayer","dojo/dom"],function(e,t,i,n,a,r,s,d){function l(e){var t,i=Date.now()-startTim,n="geopdf",a=dijit.byId("mapscaleList").attr("displayedValue"),r=Math.floor(i/1e3),s="";for(t=0;t<previewMap.layerIds.length;t++)switch(previewMap.layerIds[t]){case"Motor Vehicle Use Map":s+="M";break;case"Hunter Reference":s+="R";break;case"Game Species":s+="G";break;case"Fishing Info":s+="F";break;case"Reference":s+="R"}var d=-1;if(window.XMLHttpRequest){var l=new XMLHttpRequest;l.open("HEAD",e.url,!0),l.onreadystatechange=function(){this.readyState==this.DONE&&(d=parseInt(l.getResponseHeader("Content-Length"))/1048576,isNaN(d)||(d=parseFloat(d.toFixed(2))),console.log("Time to create map = "+r+" seconds for "+sizeCombo.attr("value")+" "+n+" "+s+" "+a+" "+d+"MB"),"function"==typeof gtag&&(gtag("event","print",{seconds:r,mb:d,app_name:app,page_size:sizeCombo.attr("value"),map_services:s,map_scale:a,map_type:n}),gtag("event",{widget_name:"Print",app_name:app})),document.getElementById("printMB").innerHTML="File size is "+d+"MB.",document.getElementById("printMB").style.display="block")},l.send()}else console.log("Time to create map = "+r+" seconds for "+sizeCombo.attr("value")+" "+n+" "+s+" "+a),"function"==typeof gtag&&(gtag("event","print",{seconds:r,app_name:app,page_size:sizeCombo.attr("value"),map_services:s,map_scale:a,map_type:n}),gtag("event",{widget_name:"Print",app_name:app}));for(console.log("printing to "+e.url),t=0;t<o;t++)removeDrawItem();g&&(document.getElementById("print_link").href=e.url+"?v="+Date.now(),document.getElementById("printInst").style.display="none",document.getElementById("print_link").style.display="block",document.getElementById("print_link").addEventListener("click",hidePrintDialog),clearInterval(u)),g=!0}function p(e){document.getElementById("printInst").style.display="none",alert("Error printing with basemap, "+mapBasemap+". Error Code: "+e,"Code Error",e),document.getElementById("printMapLink").innerHTML="";for(var t=0;t<o;t++)removeDrawItem();printDialog.hide(),clearInterval(u)}var o;try{if(""==document.getElementById("pdf_name").value)return document.getElementById("pdf_name").classList.add("error"),void(document.getElementById("pdf_name").placeholder="Please enter a file name.");if(outputName=document.getElementById("pdf_name").value,outputName=outputName.replace(/([^a-zA-Z0-9\-_\. ])/g,""),".pdf"==outputName.substr(outputName.length-4)&&(outputName=outputName.substr(0,outputName.length-4)),""==outputName)return void alert("Please enter a valid file name.","");if(!fullExtent.contains(previewMap.extent))return alert("Printing is only allowed for Colorado.","Warning"),void(document.getElementById("previewLoading").style.display="none");document.getElementById("previewCkBx").style.display="none",document.getElementById("print_instr").style.display="none",document.getElementById("printPreview").style.display="none",document.getElementById("print_button").style.display="none",document.getElementById("printInst").style.display="inline-block",document.getElementById("sizeLabel").style.display="none",document.getElementById("size").style.display="none",document.getElementById("mapscale").style.display="none",document.getElementById("mapscaleList").style.display="none",document.getElementById("orientLabel").style.display="none",document.getElementById("orient").style.display="none",document.getElementById("pdf_name_label").style.display="none",document.getElementById("pdf_name").style.display="none",document.getElementById("printScroll").scrollTop=0,document.getElementById("perDone").innerHTML="0%",document.getElementById("printBar").style.width="0px";var m,y=0,c=sizeCombo.attr("value");"8.5 x 11"==c?m=60:"11 x 17"==c?m=120:"17 x 22"==c?m=180:"22 x 34"==c?m=240:"34 x 44"==c&&(m=240),document.getElementById("aproxMin").innerHTML="Approximate time needed to create this PDF is "+m/60+" minutes or less.";var u=setInterval(function(){y+=2;var e=Math.round(y/m*100);document.getElementById("perDone").innerHTML=e+"%",document.getElementById("printBar").style.width=e+"%",e>100&&(document.getElementById("printBar").style.width=0,y=0,document.getElementById("perDone").innerHTML="0%")},2e3),g=!0;document.getElementById("printMapLink").innerHTML="",o=0;for(var h,v,b=previewMap.getLayersVisibleAtScale(),w=[],I=1;I<b.length;I++)if(b[I].visible&&"topo"!=b[I].id&&"streets"!=b[I].id&&"hybrid"!=b[I].id){if(b[I].id.indexOf("drawgraphics")>0){if(b[I].graphics.length>1&&"point"==b[I].graphics[0].geometry.type&&!b[I].graphics[0].symbol.text){o++;var f=new a(b[I].graphics[0].geometry.x,b[I].graphics[0].geometry.y,map.spatialReference),L=new n(f),x=new s;x.id="drawgraphics"+drawGraphicsCounter,drawGraphicsCount.push(x.id),drawGraphicsCounter++,addLabel(L,b[I].graphics[1].symbol.text,x,"11pt")}continue}b[I].visibleLayers&&(h=new r,h.layerId=b[I].id,h.subLayerIds=b[I].visibleLayers,w.push(h),h=null)}var M,E=new i,B=new t,_=(d.byId("orient"),orientCombo.attr("displayedValue"));"8.5 x 11"==c?c="Letter":"11 x 17"==c?c="Tabloid":"17 x 22"==c?c="ANSIC":"22 x 34"==c?c="ANSID":"34 x 44"==c&&(c="ANSIE"),B.exportOptions={dpi:dpi,width:parseInt(inchesWidth*dpi),height:parseInt(inchesHeight*dpi)},B.layout=app+" "+c+" "+_,v=new e(printGeoServiceUrl),B.preserveScale=!0,g=!0,M="none",B.format="pdf",E.extraParameters={Georef_Info:"True",Legend_Template:M,Output_Name:outputName},B.showAttribution=!1;var k=outputName;B.layoutOptions={titleText:k,authorText:prtDisclaimer,legendLayers:[],customTextElements:[{Subtitle:""}]},E.map=previewMap,E.template=B,v.execute(E,l,p),startTim=Date.now()}catch(e){for(var P=0;P<o;P++)removeDrawItem();alert("Error while printing: "+e.message,"Code Error",e),document.getElementById("printInst").style.display="none"}})}function showPrintPreview(){try{if(!document.getElementById("showPreviewMap").checked)return void(document.getElementById("printPreview").style.display="none");document.getElementById("print_img").src="",document.getElementById("printPreview").style.display="block",document.getElementById("previewLoading").style.display="block"}catch(e){alert("Error while printing: "+e.message,"Code Error",e)}require(["esri/tasks/PrintTask","esri/tasks/PrintTemplate","esri/tasks/PrintParameters"],function(e,t,i){function n(e){for(var t=Date.now()-startTim,i="prev",n=dijit.byId("mapscaleList").attr("displayedValue"),a=Math.floor(t/1e3),r="",s=0;s<previewMap.layerIds.length;s++)switch(previewMap.layerIds[s]){case"Motor Vehicle Use Map":r+="M";break;case"Hunter Reference":r+="R";break;case"Game Species":r+="G";break;case"Fishing Info":r+="F";break;case"Reference":r+="R"}console.log("Time to create preview map = "+a+" seconds for "+sizeCombo.attr("value")+" "+i+" "+r+" "+n),"function"==typeof gtag&&(gtag("event","print",{seconds:a,app_name:app,page_size:sizeCombo.attr("value"),map_services:r,map_scale:n,map_type:i}),gtag("event",{widget_name:"Print",app_name:app})),console.log("printing to "+e.url),document.getElementById("print_img").src=e.url,document.getElementById("previewLoading").style.display="none"}function a(e){document.getElementById("previewLoading").style.display="none",alert("Error loading preview: "+e,"Code Error",e)}var r,s=new i,d=new t,l=outputName,p=orientCombo.attr("displayedValue"),o=sizeCombo.attr("value");if("8.5 x 11"==o?o="Letter ":"11 x 17"==o?o="Tabloid ":"17 x 22"==o?o="ANSIC ":"22 x 34"==o?o="ANSID ":"34 x 44"==o&&(o="ANSIE "),d.layout=app+" "+o+p,r=new e(printGeoServiceUrl),d.preserveScale=!0,d.format="prev",d.exportOptions={dpi:72,width:parseInt(72*inchesWidth),height:parseInt(72*inchesHeight)},d.showAttribution=!1,d.layoutOptions={titleText:l,authorText:prtDisclaimer,legendLayers:[],customTextElements:[{Subtitle:""}]},s.map=previewMap,s.template=d,!fullExtent.contains(previewMap.extent))return alert("Printing is only allowed for Colorado.","Warning"),void(document.getElementById("previewLoading").style.display="none");r.execute(s,n,a),startTim=Date.now()})}var sizeCombo,orientCombo,startTim,inchesWidth,inchesHeight,prtDisclaimer="",outputName="",dpi=96,useLargeSizes=!1;