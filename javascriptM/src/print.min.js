function printInit(){require(["dojo/store/Memory","dijit/form/ComboBox","dijit/form/Select"],function(e,t,i){var n;n=new e(useLargeSizes?{idProperty:"value",data:[{name:"small",value:"8.5 x 11"},{name:"medium",value:"11 x 17"},{name:"large",value:"17 x 22"},{name:"x large",value:"22 x 34"},{name:"xx large",value:"34 x 44"}]}:{idProperty:"name",data:[{name:"8.5 x 11",value:"8.5 x 11"},{name:"11 x 17",value:"11 x 17"}]}),sizeCombo=new i({id:"size",name:"size",store:n,value:n.data[0].name,sortByLabel:!1,labelAttr:"name",maxHeight:-1,style:{margin:"auto"},onChange:function(){changePrintSize()}},"size"),sizeCombo.startup();var a=new e({idProperty:"name",data:[{name:"Landscape"},{name:"Portrait"}]});orientCombo=new i({id:"orient",name:"orient",store:a,value:a.data[1].name,sortByLabel:!1,labelAttr:"name",maxHeight:-1,style:{margin:"auto"},onChange:function(){changePrintSize()}},"orient"),orientCombo.startup()});var e=createXMLhttpRequest(),t=app+"/PrintPdfWidget.xml?v="+ndisVer;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=createXMLdoc(e);t.getElementsByTagName("disclaimer")[0]?prtDisclaimer=t.getElementsByTagName("disclaimer")[0].firstChild.nodeValue:alert("Missing tag, disclaimer, in "+app+"/PrintPdfWidget.xml file.","Data Error")}else 404===e.status?(alert("Error: Missing PrintPdfWidget.aspx file in "+app+" directory.","Data Error"),hideLoading()):4===e.readyState&&500===e.status&&(alert("Missing PrintPdfWidget.aspx file. app="+app,"Data Error"),hideLoading())},e.open("GET",t,!0),e.send()}function printShow(){require(["esri/layers/GraphicsLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/VectorTileLayer","esri/layers/FeatureLayer","esri/layers/OpenStreetMapLayer","dojo/dom","dojo/on","dojo/_base/array","dijit/registry"],function(e,t,i,n,r,s,d,o,l,p){function m(e){l.forEach(I,function(e){e.remove()}),I=[]}function y(e){var t,i=e.layer;if(B[e.target.id]>10){var n=document.getElementById("printLoadingTxt").innerText,a=n.indexOf(i.id),r=a+i.id.length,s=n.substring(0,a),o=n.substring(r);", "===o.substring(o.length-2)&&(o=o.substring(0,o.length-2)),", "===o.substring(0,2)&&(o=o.substring(2)),n=s+o,", "===n.substring(-2)&&(n=n.substring(0,-2)),"Still loading: "===n?(document.getElementById("printLoadingErr").style.display="none",document.getElementById("printLoadingTxt").innerText=""):document.getElementById("printLoadingTxt").innerText=n}if(i.url&&i.url.toLowerCase().indexOf("mapserver")>-1&&(null!=i.setVisibleLayers&&i.visibleLayers&&i.layerInfos)){var l=i.visibleLayers,m=i.layerInfos;for(j=0;j<i.visibleLayers.length;j++){k=i.visibleLayers[j];do{if(hideGroupSublayers.indexOf(m[k].name)>-1&&m[k].subLayerIds)for(t=0;t<m[k].subLayerIds.length;t++)if(-1==l.indexOf(m[k].subLayerIds[t])&&l.push(m[k].subLayerIds[t]),"Big Game GMU"==m[m[k].subLayerIds[t]+1].name){var y=1;"Bighorn GMU"==gmu?y=2:"Goat GMU"==gmu&&(y=3),-1==l.indexOf(m[k].subLayerIds[t]+y)&&l.push(m[k].subLayerIds[t]+y)}else-1==l.indexOf(m[k].subLayerIds[t]+1)&&l.push(m[k].subLayerIds[t]+1);k=m[k].parentLayerId}while(-1!=k)}var c=new Array(0,1,2,3,4,5,6,7,8,9);for(t=0;t<m.length;t++){-1!=l.indexOf(m[t].id)?m[t].visible=!0:-1==m[t].parentLayerId||m[t].subLayerIds?m[t].visible=!1:m[t].name.substr(m[t].name.length-3,3).indexOf("GMU")>-1?m[t].name==gmu?(-1==l.indexOf(t)&&(m[t].visible=!0),c.indexOf(parseInt(m[m[t].parentLayerId].name.substr(0,1)))>-1&&-1==l.indexOf(m[t].parentLayerId)&&(m[m[t].parentLayerId].visible=!0)):m[t].visible=!1:1==m[t].defaultVisibility&&-1===l.indexOf(m[t].parentLayerId)&&c.indexOf(parseInt(m[m[t].parentLayerId].name.substr(0,1)))>-1&&(m[m[t].parentLayerId].visible=!0);var g=l.indexOf(m[t].id);g>-1&&m[t].subLayerIds&&l.splice(g,1)}i.setVisibleLayers(l.sort(function(e,t){return e-t}),!1)}i.spatialReference=map.spatialReference,i.refresh(),previewMap.addLayer(i),L.push(i),w++;var u=M;for(_=0;_<x.length;_++)for(j=0;j<L.length;j++)x[_]==L[j].id&&(previewMap.reorderLayer(L[j],u),u++);w==x.length&&(p.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",p.byId("print_button").set("disabled",!1))}function c(e){B[e.target.id]<10?setTimeout(function(){u(map.getLayer(e.target.id))},500):10==B[e.target.id]?("none"==document.getElementById("printLoadingErr").style.display&&(document.getElementById("printLoadingErr").style.display="block"),"Still loading: "==document.getElementById("printLoadingTxt").innerText||""==document.getElementById("printLoadingTxt").innerText?document.getElementById("printLoadingTxt").innerText="Still loading: "+e.target.id:document.getElementById("printLoadingTxt").innerText+=", "+e.target.id,setTimeout(function(){u(map.getLayer(e.target.id))},500),p.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",p.byId("print_button").set("disabled",!1)):setTimeout(function(){u(map.getLayer(e.target.id))},1e3)}function u(t){if("none"!==d.byId("printDiv").style.display){var n;if(B[t.id]++,t.id.indexOf("reportGraphicsLayer")>-1)return w++,void(w==x.length&&(p.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",p.byId("print_button").set("disabled",!1)));if(null===t.url&&t.graphics){n=new e({id:t.id,visible:t.visible}),n.id=t.id;var s=t.graphics;for(a=0;a<s.length;a++)g=s[a].clone(),n.add(g);return previewMap.addLayer(n),L.push(n),s=null,w++,void(w==x.length&&(p.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",p.byId("print_button").set("disabled",!1)))}if(t.url.toLowerCase().indexOf("mapserver")>-1){if(n=new i(t.url,{opacity:parseFloat(t.opacity),id:t.id,visible:t.visible}),t.visibleLayers){for(var l=[],m=0;m<t.visibleLayers.length;m++)l.push(parseInt(t.visibleLayers[m]));n.setVisibleLayers(l),l=null}}else t.url.toLowerCase().indexOf("featureserver")>-1?n=new r(t.url,{opacity:parseFloat(t.opacity),id:t.id,visible:t.visible}):alert("Unknown map layer type for "+t.url+" in "+app+"/config.xml","Data Error");n&&(I.push(o(n,"error",c)),I.push(o(n,"load",y)))}}p.byId("print_button").set("label","Loading"),p.byId("print_button").set("disabled",!0),d.byId("print_button").style.opacity=".9",d.byId("print_button").style.color="lightgray",previewMap.spatialReference=map.spatialReference;var h,b,v,I=[],f=[],w=0,L=[],x=[],M=0,E=0,B=[];try{for("function"==typeof gtag&&gtag("event","widget_click",{widget_name:"Print"}),document.getElementById("printLoadingErr").style.display="none",document.getElementById("printLoadingTxt").innerText="",I.push(printDialog.on("hide",m)),document.getElementById("showPreviewMap").checked=!1,drawing=!0,document.getElementById("print_button").style.display="block",document.getElementById("printMapLink").innerHTML="",document.getElementById("print_link").style.display="none",document.getElementById("printMB").style.display="none",document.getElementById("print_instr").style.display="block",document.getElementById("sizeLabel").style.display="inline",document.getElementById("size").style.display="inline-table",document.getElementById("mapscale").style.display="inline",document.getElementById("mapscaleList").style.display="inline-table",document.getElementById("orientLabel").style.display="inline",document.getElementById("orient").style.display="inline-table",document.getElementById("pdf_name_label").style.display="block",document.getElementById("pdf_name").style.display="block",document.getElementById("pdf_name").onclick=function(){document.getElementById("printScroll").scrollTop=2e3},document.getElementById("pdf_name").onkeyup=function(e){null!=e.key?"Enter"!==e.key&&"NumpadEnter"!==e.key||document.getElementById("pdf_name").blur():13==e.keyCode&&document.getElementById("pdf_name").blur()},document.getElementById("printPreview").style.display="block",document.getElementById("previewCkBx").style.display="block",previewMap.removeAllLayers(),printDialog.show(),_=0;_<map.layerIds.length;_++)b=map.getLayer(map.layerIds[_]),"layer_osm"==map.layerIds[_]?(v=new s,v.id="layer_osm",previewMap.addLayer(v),v=null,M++):b.attributionDataUrl&&b.attributionDataUrl.indexOf("OpenStreet")>-1?(v=new s,v.id="layer_osm",previewMap.addLayer(v),v=null,M++):map.layerIds[_].indexOf("layer")>-1&&1==map.getLayer(map.layerIds[_]).visibleAtMapScale&&(map.getLayer(map.layerIds[_]).url.indexOf("MapServer")>-1?h=new t(map.getLayer(map.layerIds[_]).url,{id:"basemap",visible:!0}):(h=new n(map.getLayer(map.layerIds[_]).url,{id:"basemap",visible:!0}),h.setStyle(map.getLayer(map.layerIds[_]).url)),"reference"==b._basemapGalleryLayerType?h.id="reference":_>0&&(h.id="basemap"+_),h.spatialReference=map.spatialReference,h._basemapGalleryLayerType=b._basemapGalleryLayerType,h.refresh(),previewMap.addLayer(h),h=null,M++);for(var P=map.getLayersVisibleAtScale(),_=0;_<P.length;_++)P[_].visible&&-1==P[_].id.indexOf("layer")&&(f.push(P[_]),x.push(P[_].id),P[_].layerInfos&&P[_].visible&&E++);if(0==E)return alert("Printing of basemaps alone does not work. Please add map layers. From the menu, select 'Layers & Legend.'","Warning"),void(drawing=!1);for(_=0;_<f.length;_++)f[_].visible&&(B[f[_].id]=0,u(f[_]));setTimeout(function(){"Loading"==p.byId("print_button").label&&(p.byId("print_button").set("disabled",!1),p.byId("print_button").set("label","Create PDF"))},5e3),0==f.length&&(p.byId("print_button").set("label","Create PDF"),d.byId("print_button").style.color="black",p.byId("print_button").set("disabled",!1));var T=map.getLevel();T!=previewMap.getLevel()?(previewMap.extent=map.extent,document.getElementById("printPreview").style.display="none",dijit.byId("mapscaleList").set("displayedValue",Math.round(T))):(previewMap.extent=map.extent,changePrintSize())}catch(e){alert("Problem loading print menu. Error message: "+e.message,"Notice",e)}})}function changePrintSize(e){require(["esri/geometry/Point","esri/geometry/Extent","esri/SpatialReference","dojo/dom","dijit/registry"],function(t,i,n,a,r){if(previewMap&&previewMap.extent){document.getElementById("printMapLink").innerHTML="";a.byId("orient");var s=orientCombo.attr("displayedValue"),d=(a.byId("size"),sizeCombo.attr("value"));if(e){var o,l=dijit.byId("mapscaleList").get("value"),p=3.28084*(map.extent.xmax-map.extent.xmin)*12/l,m=3.28084*(map.extent.ymax-map.extent.ymin)*12/l;if(o="Landscape"==s?p:m,useLargeSizes){if(o<=11){if("8.5 x 11"!=d)return d="8.5 x 11",sizeCombo.set("value","8.5 x 11"),void("Landscape"==s?(inchesWidth=10.2,inchesHeight=7.25):(inchesWidth=7.7,inchesHeight=9.75))}else if(o<=17){if("11 x 17"!=d)return d="11 x 17",sizeCombo.set("value","11 x 17"),void("Landscape"==s?(inchesWidth=16.2,inchesHeight=9.75):(inchesWidth=10.2,inchesHeight=15.75))}else if(o<=22){if("17 x 22"!=d)return d="17 x 22",sizeCombo.set("value","17 x 22"),void("Landscape"==s?(inchesWidth=21.2,inchesHeight=15.75):(inchesWidth=16.2,inchesHeight=20.75))}else if(o<=34){if("22 x 34"!=d)return d="22 x 34",sizeCombo.set("value","22 x 34"),void("Landscape"==s?(inchesWidth=33.2,inchesHeight=20.75):(inchesWidth=21.2,inchesHeight=32.75))}else if("34 x 44"!=d)return d="34 x 44",sizeCombo.set("value","34 x 44"),void("Landscape"==s?(inchesWidth=43.2,inchesHeight=32.75):(inchesWidth=33.2,inchesHeight=42.75))}else if(o<=11){if("8.5 x 11"!=d)return d="8.5 x 11",sizeCombo.set("value","8.5 x 11"),void("Landscape"==s?(inchesWidth=10.2,inchesHeight=7.25):(inchesWidth=7.7,inchesHeight=9.75))}else if("11 x 17"!=d)return d="11 x 17",sizeCombo.set("value","11 x 17"),void("Landscape"==s?(inchesWidth=16.2,inchesHeight=9.75):(inchesWidth=10.2,inchesHeight=15.75))}"8.5 x 11"==d?d="Letter ":"11 x 17"==d?d="Tabloid ":"17 x 22"==d?d="ANSIC ":"22 x 34"==d?d="ANSID ":"34 x 44"==d&&(d="ANSIE "),"Landscape"==s?"Letter "==d?(previewMap.width=979,previewMap.height=696,inchesWidth=10.2,inchesHeight=7.25,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Tabloid "==d?(previewMap.width=1555,previewMap.height=936,inchesWidth=16.2,inchesHeight=9.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIC "==d?(previewMap.width=2035,previewMap.height=1512,inchesWidth=21.2,inchesHeight=15.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSID "==d?(previewMap.width=3187,previewMap.height=1992,inchesWidth=33.2,inchesHeight=20.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIE "==d&&(previewMap.width=4147,previewMap.height=3120,inchesWidth=43.2,inchesHeight=32.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Letter "==d?(previewMap.width=739,previewMap.height=936,inchesWidth=7.7,inchesHeight=9.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"Tabloid "==d?(previewMap.width=979,previewMap.height=1512,inchesWidth=10.2,inchesHeight=15.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIC "==d?(previewMap.width=1555,previewMap.height=1992,inchesWidth=16.2,inchesHeight=20.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSID "==d?(previewMap.width=2035,previewMap.height=3144,inchesWidth=21.2,inchesHeight=32.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})):"ANSIE "==d&&(previewMap.width=3187,previewMap.height=4104,inchesWidth=33.2,inchesHeight=42.75,r.byId("printPreviewMap").resize({w:previewMap.width,h:previewMap.height})),document.getElementById("printPreviewMap").style.width=previewMap.width+"px",document.getElementById("printPreviewMap").style.height=previewMap.height+"px";var y=document.getElementById("printPreviewMap_root");y.style.width=previewMap.width+"px",y.style.height=previewMap.height+"px",y.style.overflow="auto",showPrintPreview()}else alert("Please wait for page to load.")})}function printMap(){require(["esri/tasks/PrintTask","esri/tasks/PrintTemplate","esri/tasks/PrintParameters","esri/graphic","esri/geometry/Point","esri/tasks/LegendLayer","esri/layers/GraphicsLayer","dojo/dom"],function(e,t,i,n,a,r,s,d){function o(e){var t,i=Date.now()-startTim,n="geopdf",a=dijit.byId("mapscaleList").attr("displayedValue"),r=Math.floor(i/1e3),s="";for(t=0;t<previewMap.layerIds.length;t++)switch(previewMap.layerIds[t]){case"Motor Vehicle Use Map":s+="M";break;case"Hunter Reference":s+="R";break;case"Game Species":s+="G";break;case"Fishing Info":s+="F";break;case"Reference":s+="R"}var o=-1;if(window.XMLHttpRequest){var l=new XMLHttpRequest;l.open("HEAD",e.url,!0),l.onreadystatechange=function(){if(this.readyState==this.DONE){if(o=parseInt(l.getResponseHeader("Content-Length"))/1048576,isNaN(o)||(o=parseFloat(o.toFixed(2))),console.log("Time to create map = "+r+" seconds for "+sizeCombo.attr("value")+" "+n+" "+s+" "+a+" "+o+"MB"),"function"==typeof gtag&&gtag("event","print",{seconds:r,mb:o,page_size:sizeCombo.attr("value"),map_services:s,map_scale:a,map_type:n,app_name:app.toLowerCase(),basemap:mapBasemap}),"function"==typeof ga){var e="Print ";switch(n){case"pdf":e+="PDF";break;case"geopdf":e+="geoPDF";break;case"jpg":e+="JPG";break;case"geotiff":e+="geoTIFF";break;case"gif":e+="GIF"}var t=d.byId("size").options[d.byId("size").selectedIndex].innerHTML,i=t+" "+n+" "+s,p={metric1:r,metric2:o,dimension2:sizeCombo.attr("value"),dimension3:s,dimension4:a,dimension5:n};ga("send","event",i,t,e,r,p)}document.getElementById("printMB").innerHTML="File size is "+o+"MB.",document.getElementById("printMB").style.display="block"}},l.send()}else if(console.log("Time to create map = "+r+" seconds for "+sizeCombo.attr("value")+" "+n+" "+s+" "+a),"function"==typeof gtag&&gtag("event","print",{seconds:r,app_name:app.toLowerCase(),page_size:sizeCombo.attr("value"),map_services:s,map_scale:a,map_type:n,basemap:mapBasemap}),"function"==typeof ga){var m="Print ";switch(n){case"pdf":m+="PDF";break;case"geopdf":m+="geoPDF";break;case"jpg":m+="JPG";break;case"geotiff":m+="geoTIFF";break;case"gif":m+="GIF"}var y=d.byId("size").options[d.byId("size").selectedIndex].innerHTML,c=y+" "+n+" "+s,h={metric1:r,dimension2:sizeCombo.attr("value"),dimension3:s,dimension4:a,dimension5:n};ga("send","event",c,y,m,r,h)}for(console.log("printing to "+e.url),t=0;t<p;t++)removeDrawItem();u&&(document.getElementById("print_link").href=e.url+"?v="+Date.now(),document.getElementById("printInst").style.display="none",document.getElementById("print_link").style.display="block",document.getElementById("print_link").addEventListener("click",hidePrintDialog),clearInterval(g)),u=!0}function l(e){document.getElementById("printInst").style.display="none",alert("Error printing with basemap, "+mapBasemap+". Error Code: "+e,"Code Error",e),document.getElementById("printMapLink").innerHTML="";for(var t=0;t<p;t++)removeDrawItem();printDialog.hide(),clearInterval(g)}var p;try{if(""==document.getElementById("pdf_name").value)return document.getElementById("pdf_name").classList.add("error"),void(document.getElementById("pdf_name").placeholder="Please enter a file name.");if(outputName=document.getElementById("pdf_name").value,outputName=outputName.replace(/([^a-zA-Z0-9\-_\. ])/g,""),".pdf"==outputName.substr(outputName.length-4)&&(outputName=outputName.substr(0,outputName.length-4)),""==outputName)return void alert("Please enter a valid file name.","");if(!fullExtent.contains(previewMap.extent))return alert("Printing is only allowed for Colorado.","Warning"),void(document.getElementById("previewLoading").style.display="none");document.getElementById("previewCkBx").style.display="none",document.getElementById("print_instr").style.display="none",document.getElementById("printPreview").style.display="none",document.getElementById("print_button").style.display="none",document.getElementById("printInst").style.display="inline-block",document.getElementById("sizeLabel").style.display="none",document.getElementById("size").style.display="none",document.getElementById("mapscale").style.display="none",document.getElementById("mapscaleList").style.display="none",document.getElementById("orientLabel").style.display="none",document.getElementById("orient").style.display="none",document.getElementById("pdf_name_label").style.display="none",document.getElementById("pdf_name").style.display="none",document.getElementById("printScroll").scrollTop=0,document.getElementById("perDone").innerHTML="0%",document.getElementById("printBar").style.width="0px";var m,y=0,c=sizeCombo.attr("value");"8.5 x 11"==c?m=60:"11 x 17"==c?m=120:"17 x 22"==c?m=180:"22 x 34"==c?m=240:"34 x 44"==c&&(m=240),document.getElementById("aproxMin").innerHTML="Approximate time needed to create this PDF is "+m/60+" minutes or less.";var g=setInterval(function(){y+=2;var e=Math.round(y/m*100);document.getElementById("perDone").innerHTML=e+"%",document.getElementById("printBar").style.width=e+"%",e>100&&(document.getElementById("printBar").style.width=0,y=0,document.getElementById("perDone").innerHTML="0%")},2e3),u=!0;document.getElementById("printMapLink").innerHTML="",p=0;for(var h,b,v=previewMap.getLayersVisibleAtScale(),I=[],f=1;f<v.length;f++)if(v[f].visible&&"topo"!=v[f].id&&"streets"!=v[f].id&&"hybrid"!=v[f].id){if(v[f].id.indexOf("drawgraphics")>0){if(v[f].graphics.length>1&&"point"==v[f].graphics[0].geometry.type&&!v[f].graphics[0].symbol.text){p++;var w=new a(v[f].graphics[0].geometry.x,v[f].graphics[0].geometry.y,map.spatialReference),L=new n(w),x=new s;x.id="drawgraphics"+drawGraphicsCounter,drawGraphicsCount.push(x.id),drawGraphicsCounter++,addLabel(L,v[f].graphics[1].symbol.text,x,"11pt")}continue}v[f].visibleLayers&&(h=new r,h.layerId=v[f].id,h.subLayerIds=v[f].visibleLayers,I.push(h),h=null)}var M,E=new i,B=new t,k=(d.byId("orient"),orientCombo.attr("displayedValue"));"8.5 x 11"==c?c="Letter":"11 x 17"==c?c="Tabloid":"17 x 22"==c?c="ANSIC":"22 x 34"==c?c="ANSID":"34 x 44"==c&&(c="ANSIE"),B.exportOptions={dpi:dpi,width:parseInt(inchesWidth*dpi),height:parseInt(inchesHeight*dpi)},B.layout=app+" "+c+" "+k,b=new e(printGeoServiceUrl),B.preserveScale=!0,u=!0,M="none",B.format="pdf",E.extraParameters={Georef_Info:"True",Legend_Template:M,Output_Name:outputName},B.showAttribution=!1;var P=outputName;B.layoutOptions={titleText:P,authorText:prtDisclaimer,legendLayers:[],customTextElements:[{Subtitle:""}]},E.map=previewMap,E.template=B,b.execute(E,o,l),startTim=Date.now()}catch(e){for(var _=0;_<p;_++)removeDrawItem();alert("Error while printing: "+e.message,"Code Error",e),document.getElementById("printInst").style.display="none"}})}function showPrintPreview(){try{if(!document.getElementById("showPreviewMap").checked)return void(document.getElementById("printPreview").style.display="none");document.getElementById("print_img").src="",document.getElementById("printPreview").style.display="block",document.getElementById("previewLoading").style.display="block"}catch(e){alert("Error while printing: "+e.message,"Code Error",e)}require(["esri/tasks/PrintTask","esri/tasks/PrintTemplate","esri/tasks/PrintParameters"],function(e,t,i){function n(e){for(var t=Date.now()-startTim,i="prev",n=dijit.byId("mapscaleList").attr("displayedValue"),a=Math.floor(t/1e3),r="",s=0;s<previewMap.layerIds.length;s++)switch(previewMap.layerIds[s]){case"Motor Vehicle Use Map":r+="M";break;case"Hunter Reference":r+="R";break;case"Game Species":r+="G";break;case"Fishing Info":r+="F";break;case"Reference":r+="R"}if(console.log("Time to create preview map = "+a+" seconds for "+sizeCombo.attr("value")+" "+i+" "+r+" "+n),"function"==typeof gtag&&gtag("event","print",{seconds:a,app_name:app.toLowerCase(),page_size:sizeCombo.attr("value"),map_services:r,map_scale:n,map_type:i,basemap:mapBasemap}),"function"==typeof ga){var d="Print ";switch(i){case"pdf":d+="PDF";break;case"geopdf":d+="geoPDF";break;case"jpg":d+="JPG";break;case"geotiff":d+="geoTIFF";break;case"gif":d+="GIF"}var o=dom.byId("size").options[dom.byId("size").selectedIndex].innerHTML,l=o+" "+i+" "+r,p={metric1:a,dimension2:sizeCombo.attr("value"),dimension3:r,dimension4:n,dimension5:i};ga("send","event",l,o,d,a,p)}console.log("printing to "+e.url),document.getElementById("print_img").src=e.url,document.getElementById("previewLoading").style.display="none"}function a(e){document.getElementById("previewLoading").style.display="none",alert("Error loading preview: "+e,"Code Error",e)}var r,s=new i,d=new t,o=outputName,l=orientCombo.attr("displayedValue"),p=sizeCombo.attr("value");if("8.5 x 11"==p?p="Letter ":"11 x 17"==p?p="Tabloid ":"17 x 22"==p?p="ANSIC ":"22 x 34"==p?p="ANSID ":"34 x 44"==p&&(p="ANSIE "),d.layout=app+" "+p+l,r=new e(printGeoServiceUrl),d.preserveScale=!0,d.format="prev",d.exportOptions={dpi:72,width:parseInt(72*inchesWidth),height:parseInt(72*inchesHeight)},d.showAttribution=!1,d.layoutOptions={titleText:o,authorText:prtDisclaimer,legendLayers:[],customTextElements:[{Subtitle:""}]},s.map=previewMap,s.template=d,!fullExtent.contains(previewMap.extent))return alert("Printing is only allowed for Colorado.","Warning"),void(document.getElementById("previewLoading").style.display="none");r.execute(s,n,a),startTim=Date.now()})}var sizeCombo,orientCombo,startTim,inchesWidth,inchesHeight,prtDisclaimer="",outputName="",dpi=96,useLargeSizes=!1;