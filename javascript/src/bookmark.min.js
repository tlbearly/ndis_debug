function setBookmarks(){try{require(["dojo/dom","dijit/registry"],function(e,a){a.byId("bmTabs").watch("selectedChildWidget",function(e,a,r){"bmAddPane"==r.id&&document.getElementById("bookmarkName").focus()});var r=getCookie("bm_"+app.toLowerCase());if(""!=r)for(var t=r.split("*"),o=0;o<t.length;o++){var i=getCookie("bm"+app.toLowerCase()+"_"+t[o]);i=i.replace(/\$/g,";"),updateBookmarkContent(i)}else updateBookmarkContent("Colorado|-12350000,4250000,-11150000,5250000"),setCookie("bm"+app.toLowerCase()+"_Colorado","Colorado|-12350000,4250000,-11150000,5250000"),setCookie("bm_"+app.toLowerCase(),"Colorado");e.byId("bookmarkDiv").style.visibility="visible"})}catch(e){alert("Error in javascript/bookmark.js setBookmarks() "+e.message,"Code Error",e)}}function updateBookmarkContent(e){try{var a=e.indexOf("|"),r=e.substring(0,a),t=e.substring(a+1);html+='<a style="text-decoration:none;" href="javascript:loadBookmark(',html+="'"+t+"')",html+='"><img class="glowBtn" src="assets/images/i_bookmark.png"/> ',html+=r+'</a><img src="assets/images/w_close_red.png" style="position:relative;float:right;right:10px;" onClick="removeBookmark(',html+="'"+r+"')",html+='"/><br/><br/>',document.getElementById("bookmarkTab").innerHTML=html}catch(e){alert("Error in javascript/bookmark.js updateBookmarkContent() "+e.message,"Code Error",e)}}function addBookmark(){try{require(["dojo/dom","dijit/registry"],function(e,a){"function"==typeof ga&&ga("send","event","bookmark","click","Bookmark","1"),"function"==typeof gtag&&gtag("event","widget_click",{widget_name:"Bookmark"});var r=getCookie("bm_"+app.toLowerCase()),t=e.byId("bookmarkName").value;if(regexp=/([^a-zA-Z0-9 \-\.!_()])/g,t=t.replace(regexp,""),""!=t)if(t.indexOf("|")>-1||t.indexOf("$")>-1)alert("Bookmark name cannot contain the '|' or the '$' character.","Note");else{var o=map.extent.xmin+","+map.extent.ymin+","+map.extent.xmax+","+map.extent.ymax,i=mlGetText();i&&(o+=i),i=mlGetPoints(),i&&(o+=i),"function"==typeof getHB1298Points&&(i||(i=""),i=getHB1298Points(),i&&""!=i&&(o+=i)),i=mlGetPolys(),i&&(o+=i),i=mlGetRect(),i&&(o+=i),i=mlGetLines(),i&&(o+=i),i=mlGetLayers(),i&&(o+=i),o=o.replace(/;/g,"$"),i=t+"|"+o,updateBookmarkContent(i),r.length>0&&(r+="*"),r+=t,setCookie("bm_"+app.toLowerCase(),r),setCookie("bm"+app.toLowerCase()+"_"+t,i),e.byId("bookmarkName").value="",a.byId("bmTabs").selectChild(a.byId("bmListPane"))}else alert("Must give the bookmark a name.","Note")})}catch(e){alert("Error in javascript/bookmark.js addBookmark() "+e.message,"Code Error",e)}}function loadBookmark(e){try{var a;if("undefined"!=typeof hb1298GraphicsLayer&&hb1298GraphicsLayer.clear(),"undefined"!=typeof drawGraphicsLayer){for(a=0;a<drawGraphicsCounter;a++)map.removeLayer(map.getLayer(drawGraphicsCount[a]));drawGraphicsCounter=0,drawGraphicsCount=[]}if(drawTextGraphicsLayer){for(a=0;a<drawTextGraphicsCounter;a++)map.removeLayer(map.getLayer(drawTextGraphicsCount[a]));drawTextGraphicsCounter=0,drawTextGraphicsCount=[]}require(["esri/geometry/Extent","esri/SpatialReference","dojo/dom","dijit/registry"],function(a,r,t,o){e=e.replace(/\$/g,";");var i=e.split("&"),s=/([^0-9 \-,\.])/g;i[0]=i[0].replace(s,"");var n,l=i[0].split(",");if(n=new a({xmin:parseFloat(l[0]),ymin:parseFloat(l[1]),xmax:parseFloat(l[2]),ymax:parseFloat(l[3]),spatialReference:{wkid:wkid}}),map.setExtent(n),l=null,1!=i.length){for(var d=new r(map.spatialReference),m=1;m<i.length;m++)if(i[m].indexOf("layer=")>-1){i[m]=i[m].substring(6),s=/([^a-zA-Z0-9 =\-\|,\._()])/g,i[m]=i[m].replace(s,"");for(var p,c=i[m].indexOf("|"),b=i[m].substring(0,c),g=0;g<basemapGallery.basemaps.length;g++)if(b==basemapGallery.basemaps[g].id){p=basemapGallery.basemaps[g].title;break}for(var u=t.byId("basemapGallery").firstChild.children,f=0;f<u.length;f++)u[f].children[1].childNodes[0].nodeValue==p?(u[f].attributes.class.nodeValue="thumbnailcontainer small selected",u[f].children[0].attributes.class.nodeValue="thumbnail small selected",u[f].children[1].attributes.class.nodeValue="title small selected",u[f].children[2].attributes.class.nodeValue="title small selected"):(u[f].attributes.class.nodeValue="thumbnailcontainer small",u[f].children[0].attributes.class.nodeValue="thumbnail small",u[f].children[1].attributes.class.nodeValue="title small",u[f].children[2].attributes.class.nodeValue="title small");basemapGallery.select(b),mapBasemap=b;var k,h=i[m].substring(c+1).split(","),y=map.getLayersVisibleAtScale();gmu="Big Game GMU";for(var v,x=new Array(0,1,2,3,4,5,6,7,8,9),C=0;C<y.length;C++){var L=!1;for(k=0;k<h.length;k++)v=h[k].split("|"),y[C].id.indexOf("graphics")>-1?L=!0:y[C].id!=v[0]||(L=!0);L||y[C].hide()}for(k=0;k<h.length;k++)for(v=h[k].split("|"),C=0;C<y.length;C++)if(y[C].id==v[0])if(y[C].setOpacity(parseFloat(v[1])),v[3]?"1"==v[3]?y[C].show():y[C].hide():y[C].show(),"-1"==v[2])y[C].setVisibleLayers([]),y[C].refresh();else{for(var w=v[2].split("-"),G=0;G<w.length;G++)w[G]=0|w[G];var B,_=[];if(_=y[C].layerInfos,"Hunter Reference"==y[C].id){for(B=0;B<w.length;B++)if(_[w[B]].name.substr(_[w[B]].name.length-3,3).indexOf("GMU")>-1){gmu=_[w[B]].name;break}}else if("Game Species"==y[C].id)for(B=0;B<w.length;B++){if("Bighorn Sheep"===_[w[B]].name){gmu="Bighorn GMU";break}if("Mountain Goat"===_[w[B]].name){gmu="Goat GMU";break}}for(G=0;G<_.length;G++){-1!=w.indexOf(_[G].id)?_[G].visible=!0:-1==_[G].parentLayerId||_[G].subLayerIds?_[G].visible=!1:_[G].name.substr(_[G].name.length-3,3).indexOf("GMU")>-1?_[G].name==gmu?(-1==w.indexOf(m)&&(_[G].visible=!0),x.indexOf(parseInt(_[_[G].parentLayerId].name.substr(0,1)))>-1&&-1==w.indexOf(_[G].parentLayerId)&&(_[_[G].parentLayerId].visible=!0)):_[G].visible=!1:1==_[G].defaultVisibility&&-1===w.indexOf(_[G].parentLayerId)&&x.indexOf(parseInt(_[_[G].parentLayerId].name.substr(0,1)))>-1&&(_[_[G].parentLayerId].visible=!0);var I=w.indexOf(_[G].id);I>-1&&_[G].subLayerIds&&w.splice(I,1)}y[C].setVisibleLayers(w.sort(function(e,a){return e-a}),!1),y[C].refresh(),w=null}}else i[m].indexOf("point=")>-1?(i[m]=i[m].substring(6),s=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addPoints(i[m],d)):"function"==typeof addHB1298Points&&i[m].indexOf("hb1298=")>-1?(i[m]=i[m].substring(7),s=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addHB1298Points(i[m])):i[m].indexOf("line=")>-1?(i[m]=i[m].substring(5),s=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addLines(i[m],d)):i[m].indexOf("poly=")>-1?(i[m]=i[m].substring(5),s=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addPolys(i[m],d)):i[m].indexOf("rect=")>-1?(i[m]=i[m].substring(5),s=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addRects(i[m],d)):i[m].indexOf("text=")>-1&&(i[m]=i[m].substring(5),s=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,i[m]=i[m].replace(s,""),addLabels(i[m],d));var O=o.byId("tocDiv");O.refresh()}})}catch(e){alert("Error in javascript/bookmark.js loadBookmark() "+e.message,"Code Error",e)}}function removeBookmark(e){try{for(var a="",r=getCookie("bm_"+app.toLowerCase()),t=r.split("*"),o=0;o<t.length;o++){var i=t[o];e!=i&&(""!=a&&""!=i&&(a+="*"),a+=t[o])}setCookie("bm_"+app.toLowerCase(),a),deleteCookie("bm"+app.toLowerCase()+"_"+e),html="",setBookmarks()}catch(e){alert("Error in javascript/bookmark.js removeBookmark() "+e.message,"Code Error",e)}}var html="";