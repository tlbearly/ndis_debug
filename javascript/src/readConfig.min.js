function unloadHandler(e){}function addOverviewMap(){require(["esri/dijit/OverviewMap"],function(e){var r=new e({id:"ovMap",map:map,attachTo:"top-left",visible:!1});r.startup()})}function lookupAddress(){require(["dojo/dom"],function(e){"function"==typeof ga&&ga("send","event","address","click","Address","1");var r=e.byId("streetTxt").value,t=/([^a-zA-Z0-9 \-\',\.()])/g;if(t.test(r))return r=r.replace(t,""),e.byId("streetTxt").value=r,void alert("Illegal characters were removed from the address.","Warning");var a=e.byId("cityTxt").value;if(t=/([^a-zA-Z0-9 \-\'()])/g,t.test(a))return a=a.replace(t,""),e.byId("cityTxt").value=a,void alert("Illegal characters were removed from the city.","Warning");var l=e.byId("zipTxt").value;if(t=/([^0-9 \-])/g,t.test(l))return l=l.replace(t,""),e.byId("zipTxt").value=l,void alert("Illegal characters were removed from the zip code.","Warning");""!==r&&""!==a?require(["esri/geometry/Extent"],function(t){showLoading(),e.byId("addressLoading").style.display="block";var i={Address:r,City:a,Region:"CO",Postal:l};locator.outSpatialReference=map.spatialReference;var s=new t({xmin:-1235e4,ymin:425e4,xmax:-1115e4,ymax:525e4,spatialReference:{wkid:wkid}}),n={address:i,searchExtent:s};locator.addressToLocations(n,onAddressResults,onAddressFault)}):(hideLoading(),e.byId("addressLoading").style.display="none",alert("Street and City are required fields.","Warning"))})}function onAddressResults(e){try{require(["dojo/dom","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/graphic","esri/symbols/Font","esri/symbols/TextSymbol","dojo/_base/Color"],function(r,t,a,l,i,s,n){hideLoading(),r.byId("addressLoading").style.display="none";var o,d=new a("assets/images/i_address.png",30,30);return e.every(function(e){var r;e.score>40&&require(["esri/layers/GraphicsLayer","dojo/_base/Color"],function(t,a){o=e.location,r=new t,r.id="addressgraphics"+addressGraphicsCounter,addressGraphicsCount.push(r.id),addressGraphicsCounter++,r.add(new l(o,d));var n=e.address,y=new i("10pt",i.STYLE_NORMAL,i.VARIANT_NORMAL,i.WEIGHT_BOLD,"Helvetica"),u=new a([255,255,153,255]),c=new s(n,y,new a("#000000"));c.setOffset(0,-23);var g=new esri.symbol.TextSymbol(n,y,u);g.setOffset(1,-25);var p=new esri.symbol.TextSymbol(n,y,u);p.setOffset(0,-24);var m=new esri.symbol.TextSymbol(n,y,u);m.setOffset(0,-22);var b=new esri.symbol.TextSymbol(n,y,u);b.setOffset(-1,-21);var f=new esri.symbol.TextSymbol(n,y,u);f.setOffset(2,-23);var h=new esri.symbol.TextSymbol(n,y,u);return h.setOffset(-2,-23),r.add(new esri.Graphic(o,g)),r.add(new esri.Graphic(o,p)),r.add(new esri.Graphic(o,m)),r.add(new esri.Graphic(o,b)),r.add(new esri.Graphic(o,f)),r.add(new esri.Graphic(o,h)),r.add(new l(o,c)),map.addLayer(r),!1})}),void 0!==o?(map.centerAndZoom(o,6),!0):(alert("Address was not found.","Note"),!1)})}catch(e){return alert("Error looking up address: "+e.message,"Code Error",e),!1}}function onAddressFault(e){require(["dojo/dom"],function(r){hideLoading(),r.byId("addressLoading").style.display="none",alert("Error occurred searching for address. Address service may be down. Service name is: "+locator.url+". "+e.message,"Code Error",e)})}function clearAddress(){0!=addressGraphicsCount.length&&map.getLayer(addressGraphicsCount.pop()).clear()}function readConfig(){require(["dojo/dom","dojo/io-query","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/tasks/GeometryService","esri/SpatialReference","esri/tasks/ProjectParameters","esri/map","esri/geometry/Extent","esri/dijit/Popup","esri/symbols/SimpleFillSymbol","esri/tasks/locator","dijit/form/CheckBox","agsjs/dijit/TOC","esri/symbols/SimpleLineSymbol","esri/layers/ArcGISTiledMapServiceLayer","esri/dijit/BasemapGallery","esri/dijit/Basemap","esri/dijit/BasemapLayer","esri/arcgis/utils","esri/dijit/Gallery","dojo/sniff"],function(e,r,t,a,l,s,n,o,d,y,u,c,g,p,m,b,f,h,v,w,O,E){function I(){try{var e;e=queryObj.prj&&""!=queryObj.prj?new s(parseInt(queryObj.prj)):new s(102100),queryObj.point&&""!=queryObj.point&&addPoints(queryObj.point,e),queryObj.line&&""!=queryObj.line&&addLines(queryObj.line,e),queryObj.poly&&""!=queryObj.poly&&addPolys(queryObj.poly,e),queryObj.rect&&""!=queryObj.rect&&addRects(queryObj.rect,e),queryObj.text&&""!=queryObj.text&&addLabels(queryObj.text,e),e=null}catch(e){alert("Error loading graphics from the URL. In javascript/readConfig.js. Error message: "+e.message,"URL Graphics Error",e)}}function L(){function e(e){var i,s=e.getAttribute("label");if(B[s]++,queryObj.layer&&""!=queryObj.layer)if(e.getAttribute("url").toLowerCase().indexOf("mapserver")>-1)i=layerObj[s]?new t(e.getAttribute("url"),{opacity:layerObj[s].opacity,id:s,visible:layerObj[s].visible,visibleLayers:layerObj[s].visLayers}):new t(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!1});else{if(!(e.getAttribute("url").toLowerCase().indexOf("featureserver")>-1))return void alert("Unknown operational layer type. It must be of type MapServer or FeatureServer. Or edit readConfig.js line 600 to add new type.");i=layerObj[s]?new a(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:layerObj[s].visible,visibleLayers:layerObj[s].visLayers}):new a(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!1})}else if(e.getAttribute("url").toLowerCase().indexOf("mapserver")>-1)i="false"==e.getAttribute("visible")?new t(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!1}):new t(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!0});else{if(!(e.getAttribute("url").toLowerCase().indexOf("featureserver")>-1))return void alert("Unknown operational layer type. It must be of type MapServer or FeatureServer. Or edit readConfig.js line 600 to add new type.");i="false"==e.getAttribute("visible")?new a(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!1}):new a(e.getAttribute("url"),{opacity:Number(e.getAttribute("alpha")),id:s,visible:!0})}i.on("load",r),i.on("error",l)}function r(e){try{for(var r,t,a=[],l=0;l<S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length;l++)e.layer.id===S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[l].getAttribute("label")&&(t=S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[l]);if(k){r=!1,"false"==t.getAttribute("open")&&(r=!0);var i=t.getAttribute("opensublayer");i&&(a=i.split(",")),i=null}else{r=!0,e.layer.visible&&(r=!1);var s,n=new Array(0,1,2,3,4,5,6,7,8,9),o=[];if(layerObj[e.layer.id]){if(o=e.layer.layerInfos,"Hunter Reference"==e.layer.id){for(s=0;s<layerObj[e.layer.id].visLayers.length;s++)if(o[layerObj[e.layer.id].visLayers[s]].name.substr(o[layerObj[e.layer.id].visLayers[s]].name.length-3,3).indexOf("GMU")>-1){gmu=o[layerObj[e.layer.id].visLayers[s]].name;break}}else if("Game Species"==e.layer.id)for(s=0;s<layerObj[e.layer.id].visLayers.length;s++){if("Bighorn Sheep"===o[layerObj[e.layer.id].visLayers[s]].name){gmu="Bighorn GMU";break}if("Mountain Goat"===o[layerObj[e.layer.id].visLayers[s]].name){gmu="Goat GMU";break}}for(s=0;s<o.length;s++)-1!=layerObj[e.layer.id].visLayers.indexOf(o[s].id)?o[s].defaultVisibility=!0:-1==o[s].parentLayerId||o[s].subLayerIds?o[s].defaultVisibility=!1:o[s].name.substr(o[s].name.length-3,3).indexOf("GMU")>-1||1==o[s].defaultVisibility&&-1===layerObj[e.layer.id].visLayers.indexOf(o[s].parentLayerId)&&(layerObj[e.layer.id].visLayers.push(s),n.indexOf(parseInt(o[o[s].parentLayerId].name.substr(0,1)))>-1&&(layerObj[e.layer.id].visLayers.push(o[s].parentLayerId),o[o[s].parentLayerId].defaultVisibility=!0));e.layer.setVisibleLayers(layerObj[e.layer.id].visLayers.sort(function(e,r){return e-r})),e.layer.refresh()}}legendLayers.push({layer:e.layer,title:e.layer.id,autoToggle:!0,slider:!0,slider_ticks:3,slider_labels:["transparent","50%","opaque"],hideGroupSublayers:hideGroupSublayers,radioLayers:radioLayers,noLegend:!0,openSubLayers:a,collapsed:r}),map.addLayer(e.layer),a=null}catch(e){alert("Error in readConfig.js/layerLoadedHandler "+e.message,"Code Error",e)}}function l(r){for(var t,a=0;a<S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length;a++)if(S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[a].getAttribute("label")===r.target.id){t=S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[a];break}B[r.target.id]<5?setTimeout(function(){e(t)},2e3):5==B[r.target.id]?(r.target.id.indexOf("Motor Vehicle")>-1||r.target.id.indexOf("Wildfire")>-1||r.target.id.indexOf("BLM")>-1?alert("The external map service that provides "+r.target.id+" is experiencing problems.  This issue is out of CPW control. We will continue to try to load it. We apologize for any inconvenience.","External (Non-CPW) Map Service Error"):alert(r.target.id+" service is busy or not responding. We will continue to try to load it.","Data Error"),setTimeout(function(){e(t)},3e4)):setTimeout(function(){e(t)},3e4)}if(k=!0,queryObj.layer&&""!=queryObj.layer){k=!1;var s=queryObj.layer.substring(queryObj.layer.indexOf("|")+1).split(",");for(layerObj={},i=0;i<s.length;i++){var n=s[i].split("|");if(""!=n[0])for(n[0]=n[0].replace(/~/g," "),3==n.length&&n.push(!0),-1==n[2]?layerObj[n[0]]={opacity:n[1],visLayers:[],visible:!0}:layerObj[n[0]]={opacity:n[1],visLayers:n[2].split("-"),visible:"1"==n[3]},j=0;j<layerObj[n[0]].visLayers.length;j++)layerObj[n[0]].visLayers[j]=0|layerObj[n[0]].visLayers[j]}}try{S.getElementsByTagName("hideGroupSublayers")[0]&&S.getElementsByTagName("hideGroupSublayers")[0].firstChild&&(hideGroupSublayers=S.getElementsByTagName("hideGroupSublayers")[0].firstChild.nodeValue.split(","))}catch(e){alert("Warning: Missing hideGroupSublayers tag in "+app+"/config.xml file. "+e.message,"Data Error")}try{S.getElementsByTagName("radiolayers")[0]&&S.getElementsByTagName("radiolayers")[0].firstChild&&(radioLayers=S.getElementsByTagName("radiolayers")[0].firstChild.nodeValue.split(","))}catch(e){alert("Warning: Missing radiolayers tag in "+app+"/config.xml file. "+e.message,"Data Error")}var o=S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer");for(i=0;i<o.length;i++)B[o[i].getAttribute("label")]=0,e(o[i])}function q(){require(["dojo/dom","dijit/registry"],function(e,r){for(var t="",a=0;a<S.getElementsByTagName("widget").length;a++){var l="open"==S.getElementsByTagName("widget")[a].getAttribute("preload"),i=S.getElementsByTagName("widget")[a].getAttribute("label"),s=S.getElementsByTagName("widget")[a].getAttribute("height"),n=S.getElementsByTagName("widget")[a].getAttribute("video"),o=S.getElementsByTagName("widget")[a].getAttribute("icon");if(null!=i)if(t+=i,"Map Layers & Legend"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Map Layers & Legend.","Data Error"),e.byId("tocHelp").href=n,o&&(document.getElementById("tocIcon").src=o),l&&r.byId("tocPane").toggle(),e.byId("tocPane").style.display="block",e.byId("tocPane").style.visibility="visible",s&&""!=s&&(document.getElementById("tocContent").style.height=s+"px");else if("HB1298 Report"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Map Layers & Legend.","Data Error"),e.byId("hb1298Help").href=n,o&&(document.getElementById("hb1298Icon").src=o),document.getElementById("hb1298Pane").style.display="block",l&&(openedHB1298=!0,loadjscssfile("javascript/hb1298.js","js"));else if(i.indexOf("Resource Report")>0)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget "+i+".","Data Error"),e.byId("reportHelp").href=n,o&&(document.getElementById("reportIcon").src=o),e.byId("reportTitle").innerHTML=i,l&&r.byId("reportDiv").toggle(),e.byId("reportDiv").style.display="block",e.byId("reportDiv").style.visibility="visible",reportInit();else if("Feature Search"==i)null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Feature Search.","Data Error"),e.byId("searchHelp").href=n,o&&(document.getElementById("searchIcon").src=o),l&&(r.byId("searchDiv").toggle(),openedFeatureSearch=!0,searchInit()),e.byId("searchDiv").style.display="block",e.byId("searchDiv").style.visibility="visible";else if("Address"==i){try{locator=new c(S.getElementsByTagName("addressservice")[0].getAttribute("url"))}catch(e){alert("Missing tag: addressservice in "+app+'/config.xml.\n\nTag should look like: &lt;addressservice url="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates"/&gt;\n\nWill use that url for now.',"Data Error"),locator=new c("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates")}null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Address.","Data Error"),o&&(document.getElementById("addressIcon").src=o),e.byId("addressHelp").href=n,l&&r.byId("addressPane").toggle(),e.byId("addressPane").style.display="block",e.byId("addressPane").style.visibility="visible"}else"Draw, Label, & Measure"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Draw, Label, & Measure.","Data Error"),e.byId("drawHelp").href=n,o&&(document.getElementById("drawIcon").src=o),l&&r.byId("drawDiv").toggle(),e.byId("drawDiv").style.display="block",e.byId("drawDiv").style.visibility="visible"):"Bookmark"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Bookmark.","Data Error"),e.byId("bookmarkHelp").href=n,o&&(document.getElementById("bookmarkIcon").src=o),setBookmarks(),l&&r.byId("bookmarkDiv").toggle(),e.byId("bookmarkDiv").style.display="block",e.byId("bookmarkDiv").style.visibility="visible"):"Settings"==i?(null==n&&alert("Warning: Missing help video in "+app+"/config.xml file for widget Settings.","Data Error"),e.byId("settingsHelp").href=n,o&&(document.getElementById("settingsIcon").src=o),l&&r.byId("settingsDiv").toggle(),e.byId("settingsDiv").style.display="block",e.byId("settingsDiv").style.visibility="visible"):"Find a Place"==i||("Print"==i?o&&(document.getElementById("printIcon").src=o):"Identify"==i||("GetExtent"==i?o&&(document.getElementById("extentIcon").src=o):"MapLink"==i?o&&(document.getElementById("linkIcon").src=o):alert("Error in "+app+"/config.xml widget. Label: "+i+" was not found.  \n\nAvailable options include:\n\tMap Layers & Legend\n\t<something> Resource Report \n\tFeature Search\n\tAddress\n\tDraw, Label, & Measure\n\tBookmark\n\tFind a Place\n\tPrint\n\tSettings\n\tIdentify\n Edit javascript/readConfig.js to change this.","Data Error")))}printInit(),-1==t.indexOf("Map Layers & Legend")?e.byId("tocPane").style.display="none":-1==t.indexOf("Resource Report")?e.byId("reportDiv").style.display="none":-1==t.indexOf("Feature Search")?e.byId("searchDiv").style.display="none":-1==t.indexOf("Address")?e.byId("addressPane").style.display="none":-1==t.indexOf("Draw, Label, & Measure")?e.byId("drawDiv").style.display="none":-1==t.indexOf("Bookmark")?e.byId("bookmarkDiv").style.display="none":-1==t.indexOf("Settings")&&(e.byId("settingsDiv").style.display="none");for(var d='<span class="link"><a href="'+app+'/help.html" target="help"><img src="assets/images/i_help.png"/>Help</a></span>',y=S.getElementsByTagName("links")[0].getElementsByTagName("link"),u="",g=0;g<y.length;g++)"Go Mobile"==y[g].getAttribute("label")?d+='<span class="link"><a href="'+window.location.href.replace("index","indexM")+'" target="_top"><img src="'+y[g].getAttribute("icon")+'"/>'+y[g].getAttribute("label")+"</a></span>":"Buy License!"==y[g].getAttribute("label")?(u=y[g].getAttribute("url").replace("%3F","?").replace("%26","&"),d+='<span class="link"><a id="licenseLink"><img src="'+y[g].getAttribute("icon")+'"/>'+y[g].getAttribute("label")+"</a></span>"):d+='<span class="link"><a href="'+y[g].getAttribute("url").replace("%3F","?").replace("%26","&")+'" target="_new"><img src="'+y[g].getAttribute("icon")+'"/>'+y[g].getAttribute("label")+"</a></span>";e.byId("links").innerHTML=d,document.getElementById("licenseLink")&&"function"==typeof ga&&document.getElementById("licenseLink").addEventListener("click",function(){ga("send","event","buy_license","click","Buy License","1"),window.open(u,"_new")}),L()})}function T(){require(["esri/layers/OpenStreetMapLayer","dojo/dom","dijit/registry","dojo/sniff","dojo/on"],function(e,r,t,a,l){try{if(mapBasemap="streets",queryObj.layer&&""!=queryObj.layer){var i=queryObj.layer.substring(0,queryObj.layer.indexOf("|")).split(",");0==i[0]?mapBasemap="streets":1==i[0]?mapBasemap="hybrid":2==i[0]?mapBasemap="topo":mapBasemap=i[0],i=null}map.infoWindow.resize(330,350),customLods=[{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822}],previewMap=new o("printPreviewMap",{extent:initExtent,autoResize:!0,showAttribution:!1,logo:!1,basemap:"streets",isRubberBandZoom:!0,isScrollWheelZoom:!0,isShiftDoubleClick:!0,displayGraphicsOnPan:!a("ie"),sliderStyle:"large",minScale:9244649,lods:customLods}),customLods=null;var s,n,d=[];s=new v({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}),n=new h({layers:[s],title:"Streets",id:"streets",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/f81bc478e12c4f1691d0d7ab6361f5a6/info/thumbnail/street_thumb_b2wm.jpg"}),d.push(n),layers=[];var y=new v({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"});layers.push(y),y=new v({styleUrl:"https://www.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",type:"VectorTileLayer",opacity:1}),layers.push(y),n=new h({layers:layers,title:"Aerial Photo",id:"hybrid",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/2ea9c9cf54cb494187b03a5057d1a830/info/thumbnail/Jhbrid_thumb_b2.jpg"}),d.push(n),s=new v({url:"https://services.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer"}),n=new h({layers:[s],title:"USGS Scanned Topo",id:"topo",thumbnailUrl:"assets/images/USA_topo.png"}),d.push(n),s=new v({url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer"}),n=new h({layers:[s],title:"USGS Digital Topo",id:"natgeo",thumbnailUrl:"https://usfs.maps.arcgis.com/sharing/rest/content/items/6d9fa6d159ae4a1f80b9e296ed300767/info/thumbnail/thumbnail.jpeg"}),d.push(n),layers=[],s=new v({url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer",displayLevels:[6,7,8,9,10,11,12,13,14,15,16]}),layers.push(s),s=new v({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",displayLevels:[17,18,19]}),layers.push(s),n=new h({layers:layers,title:"Aerial Photo with USGS Contours",id:"imagery_topo",thumbnailUrl:"assets/images/aerial_topo.png"}),d.push(n),s=new v({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}),n=new h({layers:[s],title:"ESRI Digital Topo",id:"topo2",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/588f0e0acc514c11bc7c898fed9fc651/info/thumbnail/topo_thumb_b2wm.jpg"}),d.push(n),basemapGallery=new f({map:map,basemaps:d,showArcGISBasemaps:!1});var u=!0;if(l(t.byId("basemapTitlePane"),"toggle",function(){u?(u=!1,document.getElementById("basemapDiv").style.overflow="auto",document.getElementById("basemapDiv").style.height="90%"):(u=!0,document.getElementById("basemapDiv").style.overflow="hidden",document.getElementById("basemapDiv").style.height="30px")}),!basemapGallery.showArcGISBasemaps){var c=[];basemapGallery.basemaps.forEach(function(e){c.push({thumbnailUrl:e.thumbnailUrl,id:e.id,layers:e.layers,title:e.title})});var g,p={},m=null;for(g=0;g<c.length;g++)if("Streets"==c[g].title){m=c[g],c.moveTo(m,0);break}var b,j=null;for(g=0;g<c.length;g++)if("USA Topo Maps"==c[g].title){j=c[g],c.moveTo(j,2);break}for(g=0;g<c.length;g++)c[g].id==mapBasemap&&(b=g);p.items=c,p.thumbnailStyle="small";var w=new O(p,"basemapGallery");w.on("select",function(e){for(var a=r.byId("basemapGallery").firstChild.children,l=0;l<a.length;l++)a[l].children[1].childNodes[0].nodeValue==e.item.title?(a[l].attributes.class.value="thumbnailcontainer small selected",a[l].children[0].attributes.class.value="thumbnail small selected",a[l].children[1].attributes.class.value="title small selected",a[l].children[2].attributes.class.value="title small selected"):(a[l].attributes.class.value="thumbnailcontainer small",a[l].children[0].attributes.class.value="thumbnail small",a[l].children[1].attributes.class.value="title small",a[l].children[2].attributes.class.value="title small");basemapGallery.select(e.item.id),mapBasemap=e.item.id,t.byId("basemapTitlePane").toggle()}),w.select(p.items[b]),t.byId("basemapTitlePane").toggle(),w._slideDiv.style.width="auto",w.startup(),r.byId("basemapTitlePane").style.visibility="visible",r.byId("basemapTitlePane").style.display="block",w.on("error",function(e){alert("Basemap gallery error creating gallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")})}basemapGallery.on("load",function(){var e=[];basemapGallery.basemaps.forEach(function(r){var t=["Imagery Hybrid","Streets","USA Topo Maps","National Geographic Style Map","USGS Scanned Topo","My USGS Digital Topo","Aerial Photo with USGS Contours","ESRI Digital Topo"];if(t.includes(r.title)){if("Imagery Hybrid"==r.title)r.id="hybrid",r.title="Aerial";else{if("Imagery"==r.title||"Oceans"==r.title)return;"Streets"==r.title?r.id="streets":"USA Topo Maps"==r.title?r.id="topo":"ESRI Digital Topo"==r.title?r.id="topo2":"OpenStreetMap"==r.title?r.id="openstreet":"National Geographic Style Map"==r.title&&(r.id="natgeo")}e.push({thumbnailUrl:r.thumbnailUrl,id:r.id,layers:r.layers,title:r.title})}});var a,l={},i=null;for(a=0;a<e.length;a++)if("Streets"==e[a].title){i=e[a],e.moveTo(i,0);break}var s,n=null;for(a=0;a<e.length;a++)if("USA Topo Maps"==e[a].title){n=e[a],e.moveTo(n,2);break}for(a=0;a<e.length;a++)e[a].id==mapBasemap&&(s=a);document.getElementById("basemapGallery").style.height="350px",document.getElementById("basemapGallery").style.overflow="auto",l.items=e,l.thumbnailStyle="small";var o=new O(l,"basemapGallery");o.on("select",function(e){for(var a=r.byId("basemapGallery").firstChild.children,l=0;l<a.length;l++)a[l].children[1].childNodes[0].nodeValue==e.item.title?(a[l].attributes.class.value="thumbnailcontainer small selected",a[l].children[0].attributes.class.value="thumbnail small selected",a[l].children[1].attributes.class.value="title small selected",a[l].children[2].attributes.class.value="title small selected"):(a[l].attributes.class.value="thumbnailcontainer small",a[l].children[0].attributes.class.value="thumbnail small",a[l].children[1].attributes.class.value="title small",a[l].children[2].attributes.class.value="title small");basemapGallery.select(e.item.id),mapBasemap=e.item.id,t.byId("basemapTitlePane").toggle()}),o.select(l.items[s]),t.byId("basemapTitlePane").toggle(),o._slideDiv.style.width="auto",o.startup(),r.byId("basemapTitlePane").style.visibility="visible",r.byId("basemapTitlePane").style.display="block",o.on("error",function(e){alert("Basemap gallery error creating gallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")})}),basemapGallery.on("error",function(e){alert("Basemap gallery error creating basemapGallery in readConfig.js/addMap/basemapGallery.on('load'):  "+JSON.stringify(e,null,4),"Code Error")}),q()}catch(e){alert("Error in readConfig.js/addMap "+e.message,"Code Error",e)}})}var S,x,k,B={};try{var A=getCookie("xycoords");document.getElementById("xycoords_combo").value=""==A?"dms":A;var C,G=document.location.search.replace(/\%0D/g,"newline");if(queryObj=r.queryToObject(G.substr("?"===G[0]?1:0)),queryObj.point&&(queryObj.point=queryObj.point.replace(/~/g," "),C=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()\\])/g,C.test(queryObj.point)&&alert("Illegal characters were removed from way point labels.","Warning"),C=/([^a-zA-Z0-9 °\-\'\"\|;,\.!_\*()])/g,queryObj.point=queryObj.point.replace(C,""),queryObj.point=queryObj.point.replace(/newline/g,"\n")),queryObj.line&&(C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,C.test(queryObj.line)&&alert("Illegal characters were removed from the line labels.","Warning"),C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.line=queryObj.line.replace(C,"")),queryObj.poly&&(C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,C.test(queryObj.poly)&&alert("Illegal characters were removed from the shape (polygon) labels.","Warning"),C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.poly=queryObj.poly.replace(C,"")),queryObj.rect&&(C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,C.test(queryObj.rect)&&alert("Illegal characters were removed from the rectangle labels.","Warning"),C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.rect=queryObj.rect.replace(C,"")),queryObj.text&&(C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()\\])/g,C.test(queryObj.text)&&alert("Illegal characters were removed from the point labels.","Warning"),C=/([^a-zA-Z0-9 \-\'\|;,\.!_\*()])/g,queryObj.text=queryObj.text.replace(C,"")),queryObj.layer&&(queryObj.layer=queryObj.layer.replace(/~/g," "),C=/([^a-zA-Z0-9 \-\|,\._()])/g,C.test(queryObj.layer)&&alert("Illegal characters were found on the URL. Layers may not load properly.","Warning"),queryObj.layer=queryObj.layer.replace(C,"")),queryObj.keyword&&(C=/([^a-zA-Z0-9 \-\._()])/g,C.test(queryObj.keyword)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),queryObj.keyword=queryObj.keyword.replace(C,"")),queryObj.value){C=/([^a-zA-Z0-9 \-\',\.!_\*()\\#/&])/g,C.test(queryObj.value)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),C=/([^a-zA-Z0-9 \-\',\.!_\*()#/&])/g,queryObj.value=queryObj.value.replace(C,"");var M=/'/g;queryObj.value=queryObj.value.replace(M,"''")}queryObj.label&&(C=/([^a-zA-Z0-9 \-\',\.!_\*()#&/\\])/g,C.test(queryObj.label)&&alert("Illegal characters were found on the URL. Point labels may not load properly.","Warning"),C=/([^a-zA-Z0-9 \-\',\.!_\*()#&/])/g,queryObj.label=queryObj.label.replace(C,"")),queryObj.map&&(C=/([^a-zA-Z0-9 \-,\._():\/])/g,C.test(queryObj.map)&&alert("Illegal characters were found on the URL. Map may not load properly.","Warning"),queryObj.map=queryObj.map.replace(C,"")),queryObj.field&&(C=/([^a-zA-Z0-9 \-_])/g,C.test(queryObj.field)&&alert("Illegal characters were found on the URL. Map may not load properly.","Warning"),queryObj.field=queryObj.field.replace(C,"")),queryObj.prj&&isNaN(queryObj.prj)&&(queryObj.prj=102100,alert("Problem reading map projection from the URL, defaulting to WGS84.","Warning")),queryObj.extent&&(C=/([^0-9 \-,\.])/g,C.test(queryObj.extent)&&alert("Illegal characters were found on the URL. Map extent may not load properly.","Warning"),queryObj.extent=queryObj.extent.replace(C,"")),queryObj.place&&(C=/([^a-zA-Z0-9 \-\',\.!_*():#&/\\])/g,C.test(queryObj.place)&&alert("Illegal characters were found on the URL. Location may not load properly.","Warning"),C=/([^a-zA-Z0-9 \-\',\.!_*():#&/])/g,queryObj.place=queryObj.place.replace(C,"")),document.getElementById("mapDescFile").href=app+"/definitions.html";var N=createXMLhttpRequest(),D=app+"/config.xml?v="+ndisVer,U=!1;N.onreadystatechange=function(){if(4==N.readyState&&200===N.status){var r,t;S=createXMLdoc(N);try{r=S.getElementsByTagName("geometryservice")[0].getAttribute("url")}catch(e){alert("Missing tag: geometryservice in "+app+'/config.xml.\n\nTag should look like: &lt;geometryservice url="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/Utilities/Geometry/GeometryServer"/&gt;\n\nWill use that url for now.',"Data Error"),r="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/Utilities/Geometry/GeometryServer"}geometryService=new l(r);try{printServiceUrl=S.getElementsByTagName("printservice")[0].firstChild.nodeValue}catch(e){alert("Missing tag: printservice in "+app+"/config.xml.\n\nTag should look like: &lt;printservice&gt;https://ndismaps.nrel.colostate.edu/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task&lt;/printservice&gt;\n\nWill use that url for now.","Data Error"),printServiceUrl="https://ndismaps.nrel.colostate.edu/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}try{printGeoServiceUrl=S.getElementsByTagName("printservicegeo")[0].firstChild.nodeValue}catch(e){alert("Missing tag: printservicegeo in "+app+"/config.xml.\n\nTag should look like: &lt;printservicegeo&gt;https://ndismaps.nrel.colostate.edu/arcgis/rest/services/PrintTemplate/georefPrinting/GPServer/georefPrinting&lt;/printservice&gt;\n\nWill use that url for now.","Data Error"),printGeoServiceUrl="https://ndismaps.nrel.colostate.edu/arcgis/rest/services/PrintTemplate/georefPrinting/GPServer/georefPrinting"}try{t=S.getElementsByTagName("title")[0].firstChild.nodeValue}catch(e){alert("Warning: Missing title tag in "+app+"/config.xml file. "+e.message,"Data Error")}try{e.byId("title").innerHTML=t,document.title=t,e.byId("subtitle").innerHTML=S.getElementsByTagName("subtitle")[0].firstChild.nodeValue,e.byId("logo").src=S.getElementsByTagName("logo")[0].firstChild.nodeValue,e.byId("logourl").href=S.getElementsByTagName("logourl")[0].firstChild.nodeValue}catch(e){alert("Warning: Missing title, subtitle, logo, or logurl tag in "+app+"/config.xml file. "+e.message,"Data Error")}S.getElementsByTagName("noDisclaimer")&&S.getElementsByTagName("noDisclaimer")[0]&&"true"==S.getElementsByTagName("noDisclaimer")[0].firstChild.nodeValue||1!=getCookie("noDisclaimer")&&loadDisclaimer(t);try{myFindService=S.getElementsByTagName("findplaceservice")[0].getAttribute("url")}catch(e){alert("Missing tag: findplaceservice in "+app+'/config.xml.\n\nTag should look like: &lt;findplaceservice url="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/GNIS_Loc/GeocodeServer"/&gt;\n\nWill use that url for now.',"Data Error"),myFindService="https://ndismaps.nrel.colostate.edu/ArcGIS/rest/services/GNIS_Loc/GeocodeServer"}try{findPlaceInit()}catch(e){alert("Error in javascript/FindPlace.js "+e.message,"Code Error",e)}try{x=S.getElementsByTagName("map")[0].getAttribute("initialextent").split(" "),wkid=parseInt(S.getElementsByTagName("map")[0].getAttribute("wkid").trim()),fullExtent=new d({xmin:parseFloat(x[0]),ymin:parseFloat(x[1]),xmax:parseFloat(x[2]),ymax:parseFloat(x[3]),spatialReference:{wkid:wkid}})}catch(e){alert("Warning: Missing tag attributes initalextent or wkid for the map tag in "+app+"/config.xml file. "+e.message,"Data Error")}var a,i,c=[{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.992452562495,scale:4622324.434309},{level:8,resolution:611.4962262813797,scale:2311162.217155},{level:9,resolution:305.74811314055756,scale:1155581.108577},{level:10,resolution:152.87405657041106,scale:577790.554289},{level:11,resolution:76.43702828507324,scale:288895.277144},{level:12,resolution:38.21851414253662,scale:144447.638572},{level:13,resolution:19.10925707126831,scale:72223.819286},{level:14,resolution:9.554628535634155,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.388657133974685,scale:9027.977411},{level:17,resolution:1.1943285668550503,scale:4513.988705},{level:18,resolution:.5971642835598172,scale:2256.994353},{level:19,resolution:.29858214164761665,scale:1128.497176}];try{require(["dojo/_base/Color","dojo/dom-construct"],function(e,r){var t=new y({
fillSymbol:new u(u.STYLE_SOLID,new m(m.STYLE_SOLID,new e([255,0,0]),2),new e([255,255,0,.25]))},r.create("div"));map=new o("mapDiv",{autoResize:!0,showAttribution:!1,logo:!1,infoWindow:t,isRubberBandZoom:!0,isScrollWheelZoom:!0,isShiftDoubleClick:!0,displayGraphicsOnPan:!E("ie"),sliderStyle:"large",basemap:"streets",minScale:9244649,lods:c})})}catch(e){alert("Error creating map in readConfig.js. "+e.message,"Code Error",e)}if(map.on("layer-add-result",function(e){var r,t;try{if(e.error)!0,alert("Problem adding layer to map: "+e.layer.url+". Reason: "+e.error.message+". At javascript/readConfig.js","Code Error");else if(e.layer.url&&e.layer.url.indexOf("MVUM")>-1)for(t=0;t<e.layer.layerInfos.length;t++)"Visitor Map Symbology"==e.layer.layerInfos[t].name?e.layer.layerInfos[t].defaultVisibility=!1:"Status"==e.layer.layerInfos[t].name&&(e.layer.layerInfos[t].defaultVisibility=!1)}catch(r){alert("Error loading layer, "+e.layer.id+", to map. Reason: "+r.message+" in javascript/readConfig.js layer-add-result","Code Error",r)}var l=!1;for(r=0;r<legendLayers.length;r++)if(e.layer.id===legendLayers[r].title){l=!0;break}if(l){var s=!0;for(r=0;r<S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length;r++)0==B[S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[r].getAttribute("label")]&&(s=!1);if(s){var n=[],o=[];for(r=0;r<legendLayers.length;r++)n[r]=Object.assign({},legendLayers[r]);var d=0;for(r=0;r<map.layerIds.length;r++)o[r]=Object.assign({},map.getLayer(map.layerIds[r])),map.getLayer(map.layerIds[r]).id.indexOf("layer")>-1&&d++;var y=0;for(r=0;r<S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer").length;r++){for(t=0;t<legendLayers.length;t++)if(n[t].title===S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[r].getAttribute("label")){legendLayers[y++]=Object.assign({},n[t]);break}for(var u=0;u<o.length;u++)if(o[u].id===S.getElementsByTagName("operationallayers")[0].getElementsByTagName("layer")[r].getAttribute("label")){map.reorderLayer(Object.assign({},o[u]),r+d);break}}legendLayers.reverse()}try{if(a){if(i.checked)for(var c=0;c<a.layerInfos.length;c++)a.layerInfos[c].noLegend=!1;return a.refresh(),void a._adjustToState()}a=new p({map:map,layerInfos:legendLayers},"tocDiv"),a.startup(),i=new g({name:"showLegendChkBox",onChange:function(){require(["dijit/registry"],function(e){try{var r=document.getElementById("tocLoading");r.style.display="block",r.style.visibility="visible";var t=!0,a=e.byId("tocDiv");i.checked?(t=!1,setCookie("legend","1")):setCookie("legend","0");for(var l=0;l<a._rootLayerTOCs.length;l++)a._rootLayerTOCs[l].config.noLegend=t;a.refresh(),a._adjustToState(),setTimeout(function(){r.style.display="none",r.style.visibility="hidden"},1e3)}catch(e){alert("Error in readConfig.js. Loading click event for Show Legend checkbox. "+e.message,"Code Error",e),hideLoading()}})}},"showLegendChkBox"),i.startup(),1==getCookie("legend")&&i.set("checked",!0)}catch(e){alert("Error loading TOC Map Layers & Legend: "+e.message+" in javascript/readConfig.js or toc/src/agsjs/dijit/TOC.js","Code Error",e)}if(!U){U=!0;try{readSettingsWidget()}catch(e){alert("Error reading SettingsWidget.xml. Reason: "+e.message+" in javascript/readConfig.js","SettingsWidget Error",e)}try{I()}catch(e){alert("Error loading graphics and labels from the URL: "+e.message+" in javascript/readConfig.js","URL Graphics Error",e)}}}}),map.on("load",function(){map.on("mouse-move",showCoordinates),map.on("mouse-drag",showCoordinates),map.on("update-start",showLoading),map.on("update-end",hideLoading),require(["esri/dijit/Scalebar"],function(e){new e({map:map,scalebarUnit:"dual"})}),map.on("click",doIdentify),map.on("extent-change",showMapScale),document.getElementById("mapscaleList").selectedIndex=map.getLevel(),T(),addOverviewMap(),hideLoading()}),queryObj.extent&&""!=queryObj.extent){var b,f=[];f="[object Array]"===Object.prototype.toString.call(queryObj.extent)?queryObj.extent[0].split(","):queryObj.extent.split(","),b=queryObj.prj&&""!=queryObj.prj?queryObj.prj:f[0]<0&&f[0]>-200?4326:26913,x=new d({xmin:parseFloat(f[0]),ymin:parseFloat(f[1]),xmax:parseFloat(f[2]),ymax:parseFloat(f[3]),spatialReference:{wkid:parseInt(b)}});var h=new n;h.geometries=[x],h.outSR=new s(wkid),geometryService.project(h,function(e){initExtent=e[0],map.setExtent(initExtent)},function(e){alert("There was a problem converting the extent read from the URL to Web Mercator projection. extent="+f[0],", "+f[1]+", "+f[2]+", "+f[3]+"  prj="+b+"  "+e.message,"URL Extent Error",e)})}else initExtent=new d({xmin:parseFloat(x[0]),ymin:parseFloat(x[1]),xmax:parseFloat(x[2]),ymax:parseFloat(x[3]),spatialReference:{wkid:wkid}}),map.setExtent(initExtent);if(queryObj.place&&""!=queryObj.place){var v=queryObj.place.replace("%20"," ");queryObj.prj&&""!=queryObj.prj&&(settings={XYProjection:queryObj.prj}),gotoLocation(v,!0)}queryObj.keyword&&""!=queryObj.keyword&&(queryObj.value&&""!=queryObj.value?require(["esri/request","esri/tasks/QueryTask","esri/tasks/query"],function(e,r,t){var a=app+"/url.xml?v="+ndisVer,l=createXMLhttpRequest();l.onreadystatechange=function(){if(4==l.readyState&&200===l.status){for(var e=createXMLdoc(l),a=e.getElementsByTagName("layer"),i=0;i<a.length&&(a[i].getElementsByTagName("keyword")[0]&&a[i].getElementsByTagName("keyword")[0].firstChild||alert("Missing tag keyword or blank, in "+app+"/url.xml file.","Data Error"),queryObj.keyword!=a[i].getElementsByTagName("keyword")[0].firstChild.nodeValue);i++);if(i==a.length)alert("Keyword ["+queryObj.keyword+"] is not defined in "+app+"/url.xml file.","Data Error");else if(a[i].getElementsByTagName("url")[0]&&a[i].getElementsByTagName("url")[0].firstChild||alert("Missing tag url or blank, in "+app+"/url.xml file for keyword: "+queryObj.keyword+".","Data Error"),a[i].getElementsByTagName("expression")[0]&&a[i].getElementsByTagName("expression")[0].firstChild){var s=a[i].getElementsByTagName("expression")[0].firstChild.nodeValue.replace("[value]",queryObj.value),n=new r(a[i].getElementsByTagName("url")[0].firstChild.nodeValue),o=new t;o.where=s,o.returnGeometry=!0,n.execute(o,function(e){0==e.features.length?gotoLocation(queryObj.value,!0):require(["esri/geometry/Point","esri/graphicsUtils","esri/layers/GraphicsLayer","esri/graphic","esri/symbols/PictureMarkerSymbol"],function(r,t,l,s,n){var o,y;if("esriGeometryPoint"==e.geometryType){var u=8;if(a[i].getElementsByTagName("mapscale")[0]&&a[i].getElementsByTagName("mapscale")[0].firstChild&&(u=parseInt(a[i].getElementsByTagName("mapscale")[0].firstChild.nodeValue)),u>11&&(u=8),o=new r(e.features[0].geometry.x,e.features[0].geometry.y,e.spatialReference),map.centerAndZoom(o,u),queryObj.label&&""!=queryObj.label){y=new l,y.id="searchgraphics"+searchGraphicsCounter,searchGraphicsCount.push(y.id),searchGraphicsCounter++,addLabel(new s(o),queryObj.label,y,"11pt");var c=new n("assets/images/yellowdot.png",30,30);y.add(new s(o,c)),document.getElementById("findClear").style.opacity=1,document.getElementById("findClear").style.filter="alpha(opacity=100)"}}else if("esriGeometryPolygon"==e.geometryType){var g=!1;if(a[i].getElementsByTagName("union")[0]&&a[i].getElementsByTagName("union")[0].firstChild&&"true"===a[i].getElementsByTagName("union")[0].firstChild.nodeValue.toLowerCase()&&(g=!0),g){for(var p=new d(e.features[0].geometry.getExtent()),m=0;m<e.features.length;m++){var b=e.features[m].geometry.getExtent();p=p.union(b)}map.setExtent(p),o=p.getCenter()}else o=e.features[0].geometry.getCentroid(),map.setExtent(e.features[0].geometry.getExtent(),!0);queryObj.label&&""!=queryObj.label&&(y=new l,y.id="searchgraphics"+searchGraphicsCounter,searchGraphicsCount.push(y.id),searchGraphicsCounter++,addLabel(new s(o),queryObj.label,y,"11pt"),document.getElementById("findClear").style.opacity=1,document.getElementById("findClear").style.filter="alpha(opacity=100)")}else map.setExtent(e.features[0].geometry.getExtent(),!0)})},function(e){e.responseText?(alert("Error: QueryTask failed for keyword="+queryObj.keyword+" value="+queryObj.value+" "+e.message+e.responseText,"URL Keyword/Value Error",e),document.execCommand("Stop")):(alert("Error: QueryTask failed for keyword="+queryObj.keyword+" value="+queryObj.value+" "+e.message,"URL Keyword/Value Error",e),document.execCommand("Stop"))})}else alert("Missing tag expression, in "+app+"/url.xml file for keyword: "+queryObj.keyword,"Data Error")}else 404===l.status?alert("Missing url.xml file in "+app+" directory.","Data Error"):4===l.readyState&&500===l.status&&alert("Error: had trouble reading "+app+"/url.xml file in readConfig.js.","Data Error")},l.open("GET",a,!0),l.send(null)}):alert("When &keyword is used on the URL, there must be a &value also.","URL Keyword/Value Error")),queryObj.map&&""!=queryObj.map&&(queryObj.value&&""!=queryObj.value&&queryObj.field&&""!=queryObj.field?require(["esri/request","esri/tasks/QueryTask","esri/tasks/query"],function(e,r,t){var a=new r(queryObj.map),l=new t;Number(queryObj.value)?l.where=queryObj.field+"="+queryObj.value:l.where="UPPER("+queryObj.field+") LIKE UPPER('"+queryObj.value+"')",l.returnGeometry=!0,a.execute(l,function(e){require(["esri/geometry/Point","esri/graphicsUtils"],function(r,t){0==e.features.length?alert("Cannot zoom to "+queryObj.value+". The feature was not found in "+queryObj.map+" for field "+queryObj.field,"URL Map/Value Error"):"esriGeometryPoint"==e.geometryType?map.centerAndZoom(new r(e.features[0].geometry.x,e.features[0].geometry.y,e.spatialReference),8):map.setExtent(e.features[0].geometry.getExtent(),!0)})},function(e){e.responseText?alert("Error: QueryTask failed for map="+queryObj.map+" "+e.message+e.responseText,"URL Map/Value Error",e):alert("Error: QueryTask failed for map="+queryObj.map+" "+e.message,"URL Map/Value Error",e)})}):alert("When &map is used on the URL, there must also be an &field and &value.","URL Map/Value Error"))}else 404===N.status?(alert("Error: Missing config.xml file in "+app+" directory.","Data Error"),hideLoading()):4===N.readyState&&500===N.status&&(alert("Make sure your application name is correct on the URL. app="+app,"Warning"),hideLoading())},N.open("GET",D,!0),N.send(null)}catch(e){alert("Error in javascript/readConfig.js. "+e.message,"Code Error",e)}})}var locator,layerObj,addressGraphicsCount=[],addressGraphicsCounter=0;